<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>文章索引</title>
      <link href="/LoongsonGuide/2023/mywiki/Readme/"/>
      <url>/LoongsonGuide/2023/mywiki/Readme/</url>
      
        <content type="html"><![CDATA[<center><img src="/LoongsonGuide/images/logo.png" alt="Logo" style="diplay:none;width:255px;"></center><h2 id="0-索引"><a href="#0-索引" class="headerlink" title="0. 索引"></a>0. 索引</h2><ol><li><a href="../Readme">文章索引</a></li></ol><h2 id="1-固件"><a href="#1-固件" class="headerlink" title="1. 固件"></a>1. 固件</h2><ol><li><a href="../firmware">如何更新固件</a></li><li><a href="../pmon">PMON的使用方法</a></li><li><a href="../uefi">从UEFI如何启动到系统</a></li></ol><h2 id="2-系统"><a href="#2-系统" class="headerlink" title="2. 系统"></a>2. 系统</h2><ol><li><a href="../kernel">Qemu启动内核</a></li><li><a href="../systeminfo">系统下查看一些信息</a></li></ol><h2 id="3-应用"><a href="#3-应用" class="headerlink" title="3. 应用"></a>3. 应用</h2><ol><li><a href="../blog">3A6000上搭建hexo博客</a></li><li><a href="../gogs">3A6000上搭建gogs</a></li><li><a href="../qemu">Qemu使用</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 0. 索引 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>系统下查看一些信息</title>
      <link href="/LoongsonGuide/2023/mywiki/systeminfo/"/>
      <url>/LoongsonGuide/2023/mywiki/systeminfo/</url>
      
        <content type="html"><![CDATA[<h2 id="1-查看系统版本"><a href="#1-查看系统版本" class="headerlink" title="1. 查看系统版本"></a>1. 查看系统版本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# cat /etc/os-release</span><br><span class="line">NAME=&quot;Arch Linux&quot;</span><br><span class="line">PRETTY_NAME=&quot;Arch Linux&quot;</span><br><span class="line">ID=arch</span><br><span class="line">BUILD_ID=rolling</span><br><span class="line">ANSI_COLOR=&quot;38;2;23;147;209&quot;</span><br><span class="line">HOME_URL=&quot;https://archlinux.org/&quot;</span><br><span class="line">DOCUMENTATION_URL=&quot;https://wiki.archlinux.org/&quot;</span><br><span class="line">SUPPORT_URL=&quot;https://bbs.archlinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.archlinux.org/&quot;</span><br><span class="line">PRIVACY_POLICY_URL=&quot;https://terms.archlinux.org/docs/privacy-policy/&quot;</span><br><span class="line">LOGO=archlinux-logo</span><br></pre></td></tr></table></figure><h2 id="2-查看内核版本"><a href="#2-查看内核版本" class="headerlink" title="2. 查看内核版本"></a>2. 查看内核版本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# uname -a</span><br><span class="line">Linux mxd 6.5.0-4 #1 SMP PREEMPT Thu, 31 Aug 2023 09:38:08 +0000 loongarch64 GNU/Linux</span><br></pre></td></tr></table></figure><h2 id="3-查看固件版本"><a href="#3-查看固件版本" class="headerlink" title="3. 查看固件版本"></a>3. 查看固件版本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# cat /sys/firmware/loongson/boardinfo</span><br><span class="line">BIOS Information</span><br><span class="line">Vendor: Loongson</span><br><span class="line">Version: Loongson-UDK2018-V4.0.05494-stable202305</span><br><span class="line">ROM Size: 4096 KB</span><br><span class="line">Release Date: 07/10/23 18:05:47</span><br><span class="line"></span><br><span class="line">Board Information</span><br><span class="line">Manufacturer: Loongson</span><br><span class="line">Board Name: Loongson-LS3A6000-7A2000-1w-EVB-V1.21</span><br><span class="line">Family: LOONGSON64</span><br></pre></td></tr></table></figure><h2 id="4-查看ip"><a href="#4-查看ip" class="headerlink" title="4. 查看ip"></a>4. 查看ip</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: enp0s3f0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN group default qlen 1000</span><br><span class="line">    link/ether 00:55:7b:b5:7d:f7 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000</span><br><span class="line">    link/ether ce:38:b3:df:3b:23 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.13/23 brd 192.168.1.255 scope global dynamic noprefixroute enp2s0</span><br><span class="line">       valid_lft 40218sec preferred_lft 40218sec</span><br><span class="line">    inet6 fe80::80b6:e9f0:ab6c:e9c5/64 scope link noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default </span><br><span class="line">    link/ether 02:42:4e:12:01:c7 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.18.0.1/16 brd 172.18.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><h2 id="5-查看pci设备"><a href="#5-查看pci设备" class="headerlink" title="5. 查看pci设备"></a>5. 查看pci设备</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# lspci </span><br><span class="line">00:00.0 Host bridge: Loongson Technology LLC Hyper Transport Bridge Controller</span><br><span class="line">00:00.1 Host bridge: Loongson Technology LLC Hyper Transport Bridge Controller (rev 01)</span><br><span class="line">00:00.2 Host bridge: Loongson Technology LLC Device 7a20 (rev 01)</span><br><span class="line">00:00.3 Host bridge: Loongson Technology LLC Device 7a30</span><br><span class="line">00:03.0 Ethernet controller: Loongson Technology LLC Device 7a13</span><br><span class="line">00:04.0 USB controller: Loongson Technology LLC OHCI USB Controller (rev 02)</span><br><span class="line">00:04.1 USB controller: Loongson Technology LLC EHCI USB Controller (rev 02)</span><br><span class="line">00:05.0 USB controller: Loongson Technology LLC OHCI USB Controller (rev 02)</span><br><span class="line">00:05.1 USB controller: Loongson Technology LLC EHCI USB Controller (rev 02)</span><br><span class="line">00:06.0 Multimedia video controller: Loongson Technology LLC Device 7a25 (rev 01)</span><br><span class="line">00:06.1 VGA compatible controller: Loongson Technology LLC Device 7a36 (rev 02)</span><br><span class="line">00:06.2 Audio device: Loongson Technology LLC Device 7a37</span><br><span class="line">00:07.0 Audio device: Loongson Technology LLC HDA (High Definition Audio) Controller</span><br><span class="line">00:08.0 SATA controller: Loongson Technology LLC Device 7a18</span><br><span class="line">00:09.0 PCI bridge: Loongson Technology LLC Device 7a49</span><br><span class="line">00:0a.0 PCI bridge: Loongson Technology LLC Device 7a39</span><br><span class="line">00:0b.0 PCI bridge: Loongson Technology LLC Device 7a39</span><br><span class="line">00:0c.0 PCI bridge: Loongson Technology LLC Device 7a39</span><br><span class="line">00:0d.0 PCI bridge: Loongson Technology LLC Device 7a49</span><br><span class="line">00:0f.0 PCI bridge: Loongson Technology LLC Device 7a69</span><br><span class="line">00:10.0 PCI bridge: Loongson Technology LLC Device 7a59</span><br><span class="line">00:13.0 PCI bridge: Loongson Technology LLC Device 7a59</span><br><span class="line">00:16.0 System peripheral: Loongson Technology LLC Device 7a1b</span><br><span class="line">00:19.0 USB controller: Loongson Technology LLC Device 7a34</span><br><span class="line">02:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 15)</span><br><span class="line">05:00.0 Non-Volatile memory controller: Shenzhen Longsys Electronics Co., Ltd. SM2263EN/SM2263XT-based OEM SSD (rev 03)</span><br><span class="line">07:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Oland [Radeon HD 8570 / R5 430 OEM / R7 240/340 / Radeon 520 OEM] (rev 87)</span><br><span class="line">07:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Oland/Hainan/Cape Verde/Pitcairn HDMI Audio [Radeon HD 7000 Series]</span><br></pre></td></tr></table></figure><h3 id="5-1-详细查看某pci设备使用的驱动"><a href="#5-1-详细查看某pci设备使用的驱动" class="headerlink" title="5.1 详细查看某pci设备使用的驱动"></a>5.1 详细查看某pci设备使用的驱动</h3><p>其中<code>07:00.0</code>是上面左侧显示的一段数字, 根据描述, <code>07:00.0</code>那一行指一个<code>VGA兼容设备</code>, 换句话说是指显示设备, 业内叫做<code>显卡</code></p><p>如下, 该显卡使用的驱动是:<code>radeon</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# lspci  -vvv -s 07:00.0 2&gt;/dev/null | grep driver -A 2</span><br><span class="line">Kernel driver in use: radeon</span><br></pre></td></tr></table></figure><h2 id="6-查看系统下某驱动是否加载"><a href="#6-查看系统下某驱动是否加载" class="headerlink" title="6. 查看系统下某驱动是否加载"></a>6. 查看系统下某驱动是否加载</h2><p>如下显示:</p><p>第1列：表示模块的名称，如<code>radeon</code>表示<code>radeon</code>模块。</p><p>第2列：表示模块的大小，如<code>1687552</code>表示<code>radeon</code>模块的大小为<code>1687552</code>字节。</p><p>第3列：表示依赖模块的个数，如<code>74</code>表示<code>radeon</code>有<code>74</code>个依赖模块。</p><p>第4列：表示依赖模块的内容, 如<code>drm_suballoc_helper</code>依赖于<code>amdgpu</code>,<code>radeon</code>俩模块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# lsmod  | grep radeon</span><br><span class="line">radeon               1687552  74</span><br><span class="line">drm_suballoc_helper    49152  2 amdgpu,radeon</span><br><span class="line">drm_ttm_helper         49152  2 amdgpu,radeon</span><br><span class="line">ttm                   131072  3 amdgpu,radeon,drm_ttm_helper</span><br><span class="line">drm_display_helper    229376  2 amdgpu,radeon</span><br><span class="line">drm_kms_helper        229376  5 drm_dma_helper,drm_display_helper,amdgpu,radeon,loongson</span><br></pre></td></tr></table></figure><h2 id="7-查看系统启动log"><a href="#7-查看系统启动log" class="headerlink" title="7. 查看系统启动log"></a>7. 查看系统启动log</h2><p>当不确定开发人员需要哪些信息时, 请优先将此信息给出.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# dmesg</span><br><span class="line">[    2.248064] ATOM BIOS: C57701</span><br><span class="line">[    2.248176] radeon 0000:07:00.0: VRAM: 2048M 0x0000000000000000 - 0x000000007FFFFFFF (2048M used)</span><br><span class="line">[    2.248179] radeon 0000:07:00.0: GTT: 2048M 0x0000000080000000 - 0x00000000FFFFFFFF</span><br><span class="line">[    2.248180] [drm] Detected VRAM RAM=2048M, BAR=256M</span><br><span class="line">[    2.248182] [drm] RAM width 64bits DDR</span><br><span class="line">[    2.248289] [drm] radeon: 2048M of VRAM memory ready</span><br><span class="line">[    2.248292] [drm] radeon: 2048M of GTT memory ready.</span><br><span class="line">[    2.248300] [drm] Loading oland Microcode</span><br><span class="line">[    2.249595] [drm] Internal thermal controller with fan control</span><br><span class="line">[    2.259143] [drm] radeon: dpm initialized</span><br><span class="line">[    2.261098] [drm] GART: num cpu pages 131072, num gpu pages 524288</span><br><span class="line">[    2.261845] [drm] PCIE gen 3 link speeds already enabled</span><br><span class="line">[    2.328096] [drm] PCIE GART of 2048M enabled (table at 0x0000000000168000).</span><br><span class="line">[    2.328289] radeon 0000:07:00.0: WB enabled</span><br><span class="line">[    2.328291] radeon 0000:07:00.0: fence driver on ring 0 use gpu addr 0x0000000080000c00</span><br><span class="line">[    2.328293] radeon 0000:07:00.0: fence driver on ring 1 use gpu addr 0x0000000080000c04</span><br><span class="line">[    2.328294] radeon 0000:07:00.0: fence driver on ring 2 use gpu addr 0x0000000080000c08</span><br><span class="line">[    2.328296] radeon 0000:07:00.0: fence driver on ring 3 use gpu addr 0x0000000080000c0c</span><br><span class="line">[    2.328297] radeon 0000:07:00.0: fence driver on ring 4 use gpu addr 0x0000000080000c10</span><br><span class="line">[    2.343597] radeon 0000:07:00.0: fence driver on ring 5 use gpu addr 0x0000000000075a18</span><br><span class="line">[    2.343678] radeon 0000:07:00.0: radeon: MSI limited to 32-bit</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>或:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# journalctl  -b -0</span><br><span class="line">10月 11 09:16:21 mxd kernel: Linux version 6.5.0-4 (linux@archlinux) (gcc (GCC) 13.2.1 20230801, GNU ld (GNU Binutils)&gt;</span><br><span class="line">10月 11 09:16:21 mxd kernel: 64-bit Loongson Processor probed (LA664 Core)</span><br><span class="line">10月 11 09:16:21 mxd kernel: CPU0 revision is: 0014d000 (Loongson-64bit)</span><br><span class="line">10月 11 09:16:21 mxd kernel: FPU0 revision is: 00000000</span><br><span class="line">10月 11 09:16:21 mxd kernel: efi: EFI v2.7 by EDK II</span><br><span class="line">10月 11 09:16:21 mxd kernel: efi: ACPI 2.0=0xfa3b0000 SMBIOS 3.0=0xfe5b0000 INITRD=0xfa2d0e98 MEMRESERVE=0xfa2d0d98 ME&gt;</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: Early table checksum verification disabled</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: RSDP 0x00000000FA3B0000 000024 (v02 LOONGS)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: XSDT 0x00000000FA3A0000 000064 (v01 LOONGS LOONGSON 00000002      01000013)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: FACP 0x00000000FA370000 0000F4 (v03 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: DSDT 0x00000000FA340000 002676 (v02 LOONGS LOONGSON 00000002 INTL 20180629)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: FACS 0x00000000FA380000 000040</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: APIC 0x00000000FA390000 0000FA (v01 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: IVRS 0x00000000FA360000 00004C (v01 LARCH  LOONGSON 00000001 LIUX 00000001)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: MCFG 0x00000000FA350000 00003C (v01 LOONGS LOONGSON 00000001 LIUX 01000013)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: SRAT 0x00000000FA330000 000100 (v02 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: SLIT 0x00000000FA320000 00002D (v01 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: VIAT 0x00000000FA310000 00002C (v01 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">10月 11 09:16:21 mxd kernel: ACPI: PPTT 0x00000000FA300000 000128 (v03 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>两种打印不一致是因为<code>dmesg</code>命令显示的内容是从2秒开始的, 前面的内容被冲掉了, 而<code>journalctl</code>显示的内容则更完整.</p><h3 id="7-1-查看系统上一次的启动log"><a href="#7-1-查看系统上一次的启动log" class="headerlink" title="7.1 查看系统上一次的启动log"></a>7.1 查看系统上一次的启动log</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# journalctl  -b -1</span><br><span class="line">9月 06 16:19:37 mxd kernel: Linux version 6.5.0-4 (linux@archlinux) (gcc (GCC) 13.2.1 20230801, GNU ld (GNU Binutils) &gt;</span><br><span class="line">9月 06 16:19:37 mxd kernel: 64-bit Loongson Processor probed (LA664 Core)</span><br><span class="line">9月 06 16:19:37 mxd kernel: CPU0 revision is: 0014d000 (Loongson-64bit)</span><br><span class="line">9月 06 16:19:37 mxd kernel: FPU0 revision is: 00000000</span><br><span class="line">9月 06 16:19:37 mxd kernel: efi: EFI v2.7 by EDK II</span><br><span class="line">9月 06 16:19:37 mxd kernel: efi: ACPI 2.0=0xfa3b0000 SMBIOS 3.0=0xfe5b0000 INITRD=0xfa2d0e98 MEMRESERVE=0xfa2d0d18 MEM&gt;</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: Early table checksum verification disabled</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: RSDP 0x00000000FA3B0000 000024 (v02 LOONGS)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: XSDT 0x00000000FA3A0000 000064 (v01 LOONGS LOONGSON 00000002      01000013)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: FACP 0x00000000FA370000 0000F4 (v03 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: DSDT 0x00000000FA340000 002676 (v02 LOONGS LOONGSON 00000002 INTL 20180629)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: FACS 0x00000000FA380000 000040</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: APIC 0x00000000FA390000 0000FA (v01 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: IVRS 0x00000000FA360000 00004C (v01 LARCH  LOONGSON 00000001 LIUX 00000001)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: MCFG 0x00000000FA350000 00003C (v01 LOONGS LOONGSON 00000001 LIUX 01000013)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: SRAT 0x00000000FA330000 000100 (v02 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: SLIT 0x00000000FA320000 00002D (v01 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: VIAT 0x00000000FA310000 00002C (v01 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">9月 06 16:19:37 mxd kernel: ACPI: PPTT 0x00000000FA300000 000128 (v03 LOONGS LOONGSON 00000002 LIUX 01000013)</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="8-查看磁盘挂载信息"><a href="#8-查看磁盘挂载信息" class="headerlink" title="8. 查看磁盘挂载信息"></a>8. 查看磁盘挂载信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# lsblk</span><br><span class="line">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">sda           8:0    0 931.5G  0 disk</span><br><span class="line">├─sda1        8:1    0   500M  0 part</span><br><span class="line">├─sda2        8:2    0     1G  0 part</span><br><span class="line">├─sda3        8:3    0   500G  0 part</span><br><span class="line">└─sda4        8:4    0   430G  0 part /work</span><br><span class="line">nvme0n1     259:0    0 238.5G  0 disk</span><br><span class="line">├─nvme0n1p1 259:1    0   300M  0 part /boot/efi</span><br><span class="line">├─nvme0n1p2 259:2    0   300M  0 part /boot</span><br><span class="line">├─nvme0n1p3 259:3    0    80G  0 part /</span><br><span class="line">├─nvme0n1p4 259:4    0 150.4G  0 part /home</span><br><span class="line">└─nvme0n1p5 259:5    0   7.5G  0 part</span><br></pre></td></tr></table></figure><h2 id="9-查看磁盘使用信息"><a href="#9-查看磁盘使用信息" class="headerlink" title="9. 查看磁盘使用信息"></a>9. 查看磁盘使用信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# df -h</span><br><span class="line">文件系统        大小  已用  可用 已用% 挂载点</span><br><span class="line">dev             7.9G     0  7.9G    0% /dev</span><br><span class="line">run             7.9G  6.2M  7.9G    1% /run</span><br><span class="line">efivarfs         59K   14K   46K   23% /sys/firmware/efi/efivars</span><br><span class="line">/dev/nvme0n1p3   80G   16G   65G   20% /</span><br><span class="line">tmpfs           7.9G  338M  7.6G    5% /dev/shm</span><br><span class="line">tmpfs           7.9G  1.9G  6.1G   24% /tmp</span><br><span class="line">/dev/nvme0n1p4  150G   99G   52G   66% /home</span><br><span class="line">/dev/nvme0n1p2  272M  110M  147M   43% /boot</span><br><span class="line">/dev/nvme0n1p1  300M  196K  300M    1% /boot/efi</span><br><span class="line">/dev/sda4       430G   22G  408G    6% /work</span><br><span class="line">tmpfs           1.6G  608K  1.6G    1% /run/user/1000</span><br></pre></td></tr></table></figure><h2 id="10-查看内存使用情况"><a href="#10-查看内存使用情况" class="headerlink" title="10. 查看内存使用情况"></a>10. 查看内存使用情况</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# free -m</span><br><span class="line">               total        used        free      shared  buff/cache   available</span><br><span class="line">内存：         16146       13354        1372        2354        5945        2792</span><br><span class="line">交换：             0           0           0</span><br></pre></td></tr></table></figure><h2 id="11-查看系统某服务运行情况"><a href="#11-查看系统某服务运行情况" class="headerlink" title="11. 查看系统某服务运行情况"></a>11. 查看系统某服务运行情况</h2><p>比如<code>NetworkManager</code>服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# systemctl status NetworkManager</span><br><span class="line">● NetworkManager.service - Network Manager</span><br><span class="line">     Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; preset: disabled)</span><br><span class="line">     Active: active (running) since Wed 2023-10-11 09:16:23 CST; 2 weeks 1 day ago</span><br><span class="line">       Docs: man:NetworkManager(8)</span><br><span class="line">   Main PID: 2746 (NetworkManager)</span><br><span class="line">      Tasks: 4 (limit: 19334)</span><br><span class="line">     Memory: 10.7M</span><br><span class="line">        CPU: 8min 57.592s</span><br><span class="line">     CGroup: /system.slice/NetworkManager.service</span><br><span class="line">             └─2746 /usr/bin/NetworkManager --no-daemon</span><br><span class="line"></span><br><span class="line">10月 26 09:20:04 mxd NetworkManager[2746]: &lt;info&gt;  [1698283204.0241] manager: NetworkManager state is now CONNECTED_GL&gt;</span><br><span class="line">10月 26 09:22:31 mxd NetworkManager[2746]: &lt;info&gt;  [1698283351.8060] dhcp4 (enp2s0): state changed new lease, address=&gt;</span><br><span class="line">10月 26 09:35:23 mxd NetworkManager[2746]: &lt;info&gt;  [1698284123.6465] manager: NetworkManager state is now CONNECTED_SI&gt;</span><br><span class="line">10月 26 09:39:39 mxd NetworkManager[2746]: &lt;info&gt;  [1698284379.0202] manager: NetworkManager state is now CONNECTED_GL&gt;</span><br><span class="line">10月 26 09:49:58 mxd NetworkManager[2746]: &lt;info&gt;  [1698284998.6470] manager: NetworkManager state is now CONNECTED_SI&gt;</span><br><span class="line">10月 26 09:54:14 mxd NetworkManager[2746]: &lt;info&gt;  [1698285254.0105] manager: NetworkManager state is now CONNECTED_GL&gt;</span><br><span class="line">10月 26 10:04:33 mxd NetworkManager[2746]: &lt;info&gt;  [1698285873.6467] manager: NetworkManager state is now CONNECTED_SI&gt;</span><br><span class="line">10月 26 10:05:06 mxd NetworkManager[2746]: &lt;info&gt;  [1698285906.0615] manager: NetworkManager state is now CONNECTED_GL&gt;</span><br></pre></td></tr></table></figure><h3 id="11-1-查看某服务的运行log"><a href="#11-1-查看某服务的运行log" class="headerlink" title="11.1 查看某服务的运行log"></a>11.1 查看某服务的运行log</h3><p>比如<code>NetworkManager</code>服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# journalctl -b -u NetworkManager</span><br><span class="line">10月 11 09:16:23 mxd systemd[1]: Starting Network Manager...</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.3066] NetworkManager (version 1.42.6-1) is starting... &gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.3069] Read config: /etc/NetworkManager/NetworkManager.c&gt;</span><br><span class="line">10月 11 09:16:23 mxd systemd[1]: Started Network Manager.</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.3090] bus-manager: acquired D-Bus service &quot;org.freedesk&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.3143] manager[0x5555767b5ec0]: monitoring kernel firmwa&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5504] hostname: hostname: using hostnamed</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5505] hostname: static hostname changed from (none) to &gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5509] dns-mgr: init: dns=default,systemd-resolved rc-ma&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5529] manager[0x5555767b5ec0]: rfkill: Wi-Fi hardware r&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5529] manager[0x5555767b5ec0]: rfkill: WWAN hardware ra&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5566] Loaded device plugin: NMAtmManager (/usr/lib/Netw&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5615] Loaded device plugin: NMBluezManager (/usr/lib/Ne&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5627] Loaded device plugin: NMOvsFactory (/usr/lib/Netw&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5831] Loaded device plugin: NMTeamFactory (/usr/lib/Net&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5842] Loaded device plugin: NMWifiFactory (/usr/lib/Net&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5849] Loaded device plugin: NMWwanFactory (/usr/lib/Net&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5851] manager: rfkill: Wi-Fi enabled by radio killswitc&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5852] manager: rfkill: WWAN enabled by radio killswitch&gt;</span><br><span class="line">10月 11 09:16:23 mxd NetworkManager[2746]: &lt;info&gt;  [1696986983.5852] manager: Networking is enabled by state file</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="12-查看USB连接信息"><a href="#12-查看USB连接信息" class="headerlink" title="12. 查看USB连接信息"></a>12. 查看USB连接信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# lsusb -t</span><br><span class="line">/:  Bus 06.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/4p, 5000M</span><br><span class="line">/:  Bus 05.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/4p, 480M</span><br><span class="line">/:  Bus 04.Port 1: Dev 1, Class=root_hub, Driver=ohci-pci/4p, 12M</span><br><span class="line">    |__ Port 2: Dev 7, If 0, Class=Vendor Specific Class, Driver=pl2303, 12M</span><br><span class="line">/:  Bus 03.Port 1: Dev 1, Class=root_hub, Driver=ehci-pci/4p, 480M</span><br><span class="line">    |__ Port 1: Dev 103, If 0, Class=Hub, Driver=hub/4p, 480M</span><br><span class="line">        |__ Port 1: Dev 104, If 0, Class=Human Interface Device, Driver=usbhid, 1.5M</span><br><span class="line">        |__ Port 3: Dev 105, If 0, Class=Human Interface Device, Driver=usbhid, 1.5M</span><br><span class="line">        |__ Port 3: Dev 105, If 1, Class=Human Interface Device, Driver=usbhid, 1.5M</span><br><span class="line">/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=ohci-pci/4p, 12M</span><br><span class="line">    |__ Port 1: Dev 4, If 0, Class=Vendor Specific Class, Driver=pl2303, 12M</span><br><span class="line">/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=ehci-pci/4p, 480M</span><br></pre></td></tr></table></figure><h2 id="13-查看CPU相关信息"><a href="#13-查看CPU相关信息" class="headerlink" title="13. 查看CPU相关信息"></a>13. 查看CPU相关信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# lscpu</span><br><span class="line">架构：               loongarch64</span><br><span class="line">  CPU 运行模式：     32-bit, 64-bit</span><br><span class="line">  Address sizes:     48 bits physical, 48 bits virtual</span><br><span class="line">  字节序：           Little Endian</span><br><span class="line">CPU:                 8</span><br><span class="line">  在线 CPU 列表：    0-7</span><br><span class="line">BIOS 厂商 ID：       Loongson</span><br><span class="line">型号名称：           Loongson-3A6000</span><br><span class="line">  BIOS 型号名称：    Loongson-3A6000 Not Specified CPU @ 2.5GHz</span><br><span class="line">  BIOS CPU family:   603</span><br><span class="line">  CPU 系列：         Loongson-64bit</span><br><span class="line">  型号：             0x00</span><br><span class="line">  每个核的线程数：   2</span><br><span class="line">  每个座的核数：     4</span><br><span class="line">  座：               1</span><br><span class="line">  BogoMIPS：         5000.00</span><br><span class="line">  标记：             cpucfg lam ual fpu lsx lasx crc32 complex crypto lvz lbt_x86 lbt_arm lbt_mips</span><br><span class="line">Caches (sum of all):</span><br><span class="line">  L1d:               512 KiB (8 instances)</span><br><span class="line">  L1i:               512 KiB (8 instances)</span><br><span class="line">  L2:                2 MiB (8 instances)</span><br><span class="line">  L3:                16 MiB (1 instance)</span><br><span class="line">NUMA:</span><br><span class="line">  NUMA 节点：        1</span><br><span class="line">  NUMA 节点0 CPU：   0-7</span><br></pre></td></tr></table></figure><p>以及:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# cat /proc/cpuinfo </span><br><span class="line">system type: generic-loongson-machine</span><br><span class="line"></span><br><span class="line">processor: 0</span><br><span class="line">package: 0</span><br><span class="line">core: 0</span><br><span class="line">global_id: 0</span><br><span class="line">CPU Family: Loongson-64bit</span><br><span class="line">Model Name: Loongson-3A6000</span><br><span class="line">CPU Revision: 0x00</span><br><span class="line">FPU Revision: 0x00</span><br><span class="line">CPU MHz: 2500.00</span><br><span class="line">BogoMIPS: 5000.00</span><br><span class="line">TLB Entries: 2112</span><br><span class="line">Address Sizes: 48 bits physical, 48 bits virtual</span><br><span class="line">ISA: loongarch32 loongarch64</span><br><span class="line">Features: cpucfg lam ual fpu lsx lasx crc32 complex crypto lvz lbt_x86 lbt_arm lbt_mips</span><br><span class="line">Hardware Watchpoint: yes, iwatch count: 8, dwatch count: 4</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="14-查看SMBIOS详细信息"><a href="#14-查看SMBIOS详细信息" class="headerlink" title="14. 查看SMBIOS详细信息"></a>14. 查看SMBIOS详细信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# dmidecode</span><br><span class="line"># dmidecode 3.5</span><br><span class="line">Getting SMBIOS data from sysfs.</span><br><span class="line">SMBIOS 3.2.0 present.</span><br><span class="line">Table at 0xFE5A0000.</span><br><span class="line"></span><br><span class="line">Handle 0x0000, DMI type 0, 26 bytes</span><br><span class="line">BIOS Information</span><br><span class="line">Vendor: Loongson</span><br><span class="line">Version: Loongson-UDK2018-V4.0.05494-stable202305</span><br><span class="line">Release Date: 07/10/23 18:05:47</span><br><span class="line">ROM Size: 4 MB</span><br><span class="line">Characteristics:</span><br><span class="line">PCI is supported</span><br><span class="line">BIOS is upgradeable</span><br><span class="line">Boot from CD is supported</span><br><span class="line">Selectable boot is supported</span><br><span class="line">BIOS ROM is socketed</span><br><span class="line">Serial services are supported (int 14h)</span><br><span class="line">USB legacy is supported</span><br><span class="line">UEFI is supported</span><br><span class="line">BIOS Revision: 4.0</span><br><span class="line"></span><br><span class="line">Handle 0x0001, DMI type 1, 27 bytes</span><br><span class="line">System Information</span><br><span class="line">Manufacturer: Loongson</span><br><span class="line">Product Name: Loongson-3A6000-7A2000-1w-V0.1-EVB</span><br><span class="line">Version: Not Specified</span><br><span class="line">Serial Number: Not Specified</span><br><span class="line">UUID: Not Present</span><br><span class="line">Wake-up Type: Power Switch</span><br><span class="line">SKU Number: Not Specified</span><br><span class="line">Family: Not Specified</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>可以使用<code>-t</code>参数只看某一项信息</p><p>如查看<code>processor</code>信息:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd mxd]# dmidecode -t processor</span><br><span class="line"># dmidecode 3.5</span><br><span class="line">Getting SMBIOS data from sysfs.</span><br><span class="line">SMBIOS 3.2.0 present.</span><br><span class="line"></span><br><span class="line">Handle 0x0004, DMI type 4, 48 bytes</span><br><span class="line">Processor Information</span><br><span class="line">Socket Designation: CPU0</span><br><span class="line">Type: Central Processor</span><br><span class="line">Family: &lt;OUT OF SPEC&gt;</span><br><span class="line">Manufacturer: Loongson</span><br><span class="line">ID: 33 41 36 30 30 30 00 00</span><br><span class="line">Version: Loongson-3A6000</span><br><span class="line">Voltage: Unknown</span><br><span class="line">External Clock: Unknown</span><br><span class="line">Max Speed: Unknown</span><br><span class="line">Current Speed: 2500 MHz</span><br><span class="line">Status: Populated, Enabled</span><br><span class="line">Upgrade: &lt;OUT OF SPEC&gt;</span><br><span class="line">L1 Cache Handle: Not Provided</span><br><span class="line">L2 Cache Handle: Not Provided</span><br><span class="line">L3 Cache Handle: Not Provided</span><br><span class="line">Serial Number: Not Specified</span><br><span class="line">Asset Tag: Not Specified</span><br><span class="line">Part Number: Not Specified</span><br><span class="line">Core Count: 8</span><br><span class="line">Core Enabled: 8</span><br><span class="line">Thread Count: 8</span><br><span class="line">Characteristics:</span><br><span class="line">64-bit capable</span><br><span class="line">Multi-Core</span><br><span class="line">Hardware Thread</span><br></pre></td></tr></table></figure><h2 id="15-查看媒体文件信息"><a href="#15-查看媒体文件信息" class="headerlink" title="15. 查看媒体文件信息"></a>15. 查看媒体文件信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd video_test]# mediainfo yangman.wav</span><br><span class="line">General</span><br><span class="line">Complete name                            : yangman.wav</span><br><span class="line">Format                                   : Wave</span><br><span class="line">Format settings                          : PcmWaveformat</span><br><span class="line">File size                                : 43.4 MiB</span><br><span class="line">Duration                                 : 3 min 56 s</span><br><span class="line">Overall bit rate mode                    : Constant</span><br><span class="line">Overall bit rate                         : 1 541 kb/s</span><br><span class="line">Album                                    : 少年</span><br><span class="line">Track name                               : 少年</span><br><span class="line">Track name/Position                      : 1</span><br><span class="line">Performer                                : 梦然</span><br><span class="line">Director                                 : ÃÎÈ»</span><br><span class="line">Genre                                    : pop</span><br><span class="line">Recorded date                            : 2019</span><br><span class="line">Original source form/Name                : ÉÙÄê</span><br><span class="line">Copyright                                : 夏星星收藏</span><br><span class="line">Cover                                    : Yes</span><br><span class="line">Cover type                               : Cover (front)</span><br><span class="line">Cover MIME                               : image/jpeg</span><br><span class="line">ITRK                                     : 1</span><br><span class="line">iurl                                     : http://user.qzone.qq.com/</span><br><span class="line"></span><br><span class="line">Audio</span><br><span class="line">Format                                   : PCM</span><br><span class="line">Format settings                          : Little / Signed</span><br><span class="line">Codec ID                                 : 1</span><br><span class="line">Duration                                 : 3 min 56 s</span><br><span class="line">Bit rate mode                            : Constant</span><br><span class="line">Bit rate                                 : 1 536 kb/s</span><br><span class="line">Channel(s)                               : 2 channels</span><br><span class="line">Sampling rate                            : 48.0 kHz</span><br><span class="line">Bit depth                                : 16 bits</span><br><span class="line">Stream size                              : 43.2 MiB (100%)</span><br></pre></td></tr></table></figure><h2 id="16-查看文件"><a href="#16-查看文件" class="headerlink" title="16. 查看文件"></a>16. 查看文件</h2><h3 id="16-1-产看文件类型"><a href="#16-1-产看文件类型" class="headerlink" title="16.1 产看文件类型"></a>16.1 产看文件类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd video_test]# file yangman.wav</span><br><span class="line">yangman.wav: RIFF (little-endian) data, WAVE audio, Microsoft PCM, 16 bit, stereo 48000 Hz</span><br></pre></td></tr></table></figure><h2 id="16-2-查看文件大小"><a href="#16-2-查看文件大小" class="headerlink" title="16.2 查看文件大小"></a>16.2 查看文件大小</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd video_test]# du -sh yangman.wav</span><br><span class="line">44Myangman.wav</span><br></pre></td></tr></table></figure><h3 id="16-3-查看文件校验码"><a href="#16-3-查看文件校验码" class="headerlink" title="16.3 查看文件校验码"></a>16.3 查看文件校验码</h3><p>如<code>md5</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd video_test]# md5sum yangman.wav</span><br><span class="line">07c75d425e152d3ef782a8dd4b420ab7  yangman.wav</span><br></pre></td></tr></table></figure><h2 id="17-查看网络端口信息"><a href="#17-查看网络端口信息" class="headerlink" title="17. 查看网络端口信息"></a>17. 查看网络端口信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mxd video_test]# netstat -tnup | grep 3389</span><br><span class="line">tcp6       0      0 192.168.1.3:3389           192.168.1.4:59708       ESTABLISHED -</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 2. 系统 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>3A6000上搭建gogs</title>
      <link href="/LoongsonGuide/2023/mywiki/gogs/"/>
      <url>/LoongsonGuide/2023/mywiki/gogs/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">pacman -S mariadb</span><br><span class="line">mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql</span><br><span class="line">systemctl start mysql</span><br><span class="line">mariadb --initialize-insecure --user=mysql --datadir=&#x27;./data&#x27;</span><br><span class="line">mysql -u root</span><br><span class="line"></span><br><span class="line">[root@mxd gitrepo]# mysql -u root</span><br><span class="line">mysql: Deprecated program name. It will be removed in a future release, use &#x27;/usr/bin/mariadb&#x27; instead</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 8</span><br><span class="line">Server version: 11.0.2-MariaDB Arch Linux</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create user &#x27;gogs&#x27;@&#x27;localhost&#x27; identified by &#x27;passwd&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select user,host from mysql.user;</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| User        | Host      |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| PUBLIC      |           |</span><br><span class="line">|             | localhost |</span><br><span class="line">| gogs        | localhost |</span><br><span class="line">| mariadb.sys | localhost |</span><br><span class="line">| mysql       | localhost |</span><br><span class="line">| root        | localhost |</span><br><span class="line">|             | mxd       |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">7 rows in set (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE gogs;</span><br><span class="line">Query OK, 1 row affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| gogs               |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant all privileges on gogs.* to &#x27;gogs&#x27;@&#x27;%&#x27; identified by &#x27;passwd&#x27; with grant option;</span><br><span class="line">Query OK, 0 rows affected (0.001 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>build gogs:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pacman -S go node npm</span><br><span class="line">git clone --depth 1 https://github.com/gogs/gogs.git gogs</span><br><span class="line">cd gogs</span><br><span class="line">go build -o gogs</span><br><span class="line">./gogs web</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 3. 应用 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>从UEFI如何启动到系统</title>
      <link href="/LoongsonGuide/2023/mywiki/uefi/"/>
      <url>/LoongsonGuide/2023/mywiki/uefi/</url>
      
        <content type="html"><![CDATA[<h2 id="UEFI须知"><a href="#UEFI须知" class="headerlink" title="UEFI须知"></a>UEFI须知</h2><h2 id="1-进入UEFI-setup界面"><a href="#1-进入UEFI-setup界面" class="headerlink" title="1. 进入UEFI setup界面"></a>1. 进入UEFI setup界面</h2><p>在串口或者显示界面下显示<code>BDS</code>字样的时候(如下图), 稍微按按上下键即可进入<code>Setup</code>界面<br><img src="/LoongsonGuide/images/uefi/1.png" alt="UEFI Booting"></p><h2 id="2-Setup界面"><a href="#2-Setup界面" class="headerlink" title="2. Setup界面"></a>2. Setup界面</h2><p>无论是<code>Intel</code>还是<code>loongson</code>, <code>BIOS</code>下都有设置的接口, <code>PMON</code>也有, 无非是显示样式差异, 原理相通. <code>Loongson</code>的<code>UEFI</code>界面如下图</p><p>不同的条目, 用于设置不同的功能. 其中普通用户通常只需要进入<code>BootManager</code>界面选择相应的启动目标即可.<br><img src="/LoongsonGuide/images/uefi/2.png" alt="Setup"></p><h2 id="3-BootManager界面"><a href="#3-BootManager界面" class="headerlink" title="3. BootManager界面"></a>3. BootManager界面</h2><p>在下图区域<code>1</code>中为条目名称, 区域<code>2</code>中为<code>UEFI</code>下解析的路径名(有点专业,不用理解), 总之, 左边看不懂时就看右边, 找相关的关键字, 比如下图, 左侧是设备名, 不太能看出是什么设备, 右侧则有<code>Sata</code>字样可以识别.<br><img src="/LoongsonGuide/images/uefi/3.png" alt="BootManager"></p><h2 id="4-Shell下操作"><a href="#4-Shell下操作" class="headerlink" title="4. Shell下操作"></a>4. Shell下操作</h2><p>通常, 正常情况下, 系统直接启动, 用户无法感知上述界面的存在, 但当出现一些问题时, 我们可能需要进入<code>Shell</code>下进行操作, 如上图中的第二个条目, 选中后回车进入下图界面:<br><img src="/LoongsonGuide/images/uefi/4.png" alt="Shell"></p><h3 id="4-1-显示启动设备"><a href="#4-1-显示启动设备" class="headerlink" title="4.1. 显示启动设备"></a>4.1. 显示启动设备</h3><p>正常情况下， 进入<code>Shell</code>后仍然会提示启动相关的设备, 如上图, 倘若由于操作过多, 或者显示<code>bug</code>等, 我们还想再次看到相关的显示, 则需要通过<code>map</code>命令再次显示，如下图：</p><p><img src="/LoongsonGuide/images/uefi/5.png" alt="map命令"></p><p>可以看到, 其实和默认进入<code>Shell</code>的打印是一样的, 不过为了防止打印被冲刷掉, 还是要会一下.</p><h3 id="4-2-进入设备及查看文件"><a href="#4-2-进入设备及查看文件" class="headerlink" title="4.2. 进入设备及查看文件"></a>4.2. 进入设备及查看文件</h3><p>看上图, 图中黄色字体, <code>FS0:</code> , <code>BLK0:</code>等, 可以理解为不同设备的重命名, 其中<code>FS</code>开头的标识表示该设备的文件系统可以识别, <code>BLK</code>开头的表示表示该设备不存在文件系统, 或者文件系统不可识别. 总之对我们有意义的就只有<code>FS</code>开头的标识.</p><p>只有含有文件系统的设备我们才能访问, 所以<code>UEFI</code>下需要访问的<code>GRUB</code>, 内核等<code>EFI</code>文件一定是放在<code>UEFI</code>下能够识别的文件系统中的. 也就是<code>FS</code>开头的设备.</p><p>如何访问文件系统中的文件呢, 先看下图:</p><p><img src="/LoongsonGuide/images/uefi/6.png" alt="文件操作"></p><p>进入设备时比较特殊, 输入<code>FS0:</code>即可,不能是<code>cd FS0:</code>, 也不能不加后面的冒号.</p><p>进入设备之后就和linux的操作很类似了, 使用<code>cd</code>, <code>ls</code>即可.</p><p>然后<code>ls</code>看到的緑色显示的文件, 也就是UEFI下的可执行文件–EFI文件. 运行时也无需像linux那样在前面加路径才能执行, UEFI下直接输入文件名即可.</p><p>哦, 值得一提, UEFI下可以通过<code>Tab</code>键实现文件名补全.</p><h3 id="4-3-UEFI下的其他操作"><a href="#4-3-UEFI下的其他操作" class="headerlink" title="4.3. UEFI下的其他操作"></a>4.3. UEFI下的其他操作</h3><p>如第一节的内容, <code>UEFI</code>下的界面下通常会有很多选项, 其中用户比较关心的选项大概有:</p><ol><li>快速启动: 忽略部分设备初始化, 启动速度加快, 比如x86部分机器需要关闭此选项才能更改启动顺序, 选择系统安装盘.</li><li>安全启动: 开启安全校验, 部分外插设备未经过校验可能无法识别, 所以x86装机时可能也需要关闭此项, 防止U盘无法识别.</li><li>传统模式: 通常是用于兼容很久的系统启动. 比如龙芯的机器开启传统模式可以安装旧世界系统, 关闭则安装新世界系统, x86下可能叫CSM…, 开启则可以引导MBR分区的硬盘, 关闭则引导GPT格式硬盘.</li><li>高级选项:一些高级的功能开关, 普通用户可能不需要使用, 比如上述传统模式, 龙芯的机器将其放在了高级选项中, 英文是LegacyMode, (看不懂这种英文的同学自我PUA一下). 其他如有需求请在工程师指导下使用.</li></ol><h3 id="4-4-UEFI下的一些Shell命令"><a href="#4-4-UEFI下的一些Shell命令" class="headerlink" title="4.4. UEFI下的一些Shell命令"></a>4.4. UEFI下的一些Shell命令</h3><p>比如<code>pci</code>命令, 具体可以通过<code>pci -?</code>查看具体使用方法, 这里不详细演示.</p><p>常用的命令有:<code>cd</code>, <code>ls</code>, <code>map</code>, <code>pci</code>, <code>mm</code>, <code>dmem</code>, <code>ifconfig</code>, <code>edit</code>, <code>vers</code>等.</p><h2 id="5-UEFI下更新固件方法"><a href="#5-UEFI下更新固件方法" class="headerlink" title="5. UEFI下更新固件方法"></a>5. UEFI下更新固件方法</h2><p>还有<code>spi</code>命令不得不单独强调, 一个产品往往需要保持更新才能更好的满足用户的需求. 固件是尤其重要的一点.</p><p>当我们需要更新固件(UEFI和PMON都是固件)时, 在<code>Shell</code>下找到文件后, 通过<code>spi -u filename</code>的命令, 即可完成固件更新.</p><p>当然图形界面下也有相关接口, 可以自己理解一下英文再操作.</p><h2 id="GRUB"><a href="#GRUB" class="headerlink" title="GRUB"></a>GRUB</h2><h2 id="GRUB界面"><a href="#GRUB界面" class="headerlink" title="GRUB界面"></a>GRUB界面</h2><p><img src="/LoongsonGuide/images/uefi/7.png" alt="GRUB主界面"></p><p>如图, GRUB界面下列出了几个选项, 其中第一项<code>vm.mxd</code>是我自己加的内核, 第二项<code>Loongnix GNU/Linux</code>是系统自带内核, 第三项<code>Advanced options for Loongnix GNU/Linux</code>是高级选项, 通常包含一些恢复模式的选项, 第四项是<code>System Setup</code>–系统设置, 其实就是进入<code>UEFI Setup</code>界面.</p><p>然后在界面的最下方:</p><blockquote><p>Use the ^ and v keys to select which entry is highlighted.<br>Press enter to boot the selected OS, <code>e</code> to edit the commands<br>before booting or <code>c</code> for a command-line.                    </p></blockquote><p>翻译一下:</p><blockquote><p>通过按上下键选择选项, 按执行进入选项, 按<code>e</code>去编辑选项, 按<code>c</code>进入<code>GRUB</code>的命令行.</p></blockquote><h2 id="1-编辑GRUB选项"><a href="#1-编辑GRUB选项" class="headerlink" title="1. 编辑GRUB选项"></a>1. 编辑GRUB选项</h2><p>通常我们通过<code>UEFI</code>执行<code>GRUB</code>的<code>efi</code>文件即可进入<code>GRUB</code>界面, 然后回车便可以启动内核, 但是倘若内核无法正常启动, 我们需要加串口调试, 就需要我们按<code>e</code>去编辑选项, 比如增加串口或者进入单用户模式等.</p><p>按<code>e</code>后进入下图, 我们可以将光标通过上下左右按键, 移动至<code>linux</code>开头的那一行, 并在行末加入想要的参数比如串口<code>console=ttyS0,115200 earlycon=uart,mmio,0x1fe001e0</code>.</p><p><img src="/LoongsonGuide/images/uefi/8.png" alt="GRUB编辑"></p><p>可以看到, 界面最下面仍然有一些文字, 告诉我们按下<code>Ctrl-X</code>组合键或者<code>F10</code>可以直接启动, 按下<code>Ctrl-c</code>或<code>F2</code>进入到<code>GRUB</code>命令行, 按下<code>ESC</code>可以退回上一步.</p><h2 id="2-手动找grub-cfg"><a href="#2-手动找grub-cfg" class="headerlink" title="2. 手动找grub.cfg"></a>2. 手动找grub.cfg</h2><p>当我们在<code>UEFI</code>下执行<code>GRUB</code>的<code>efi</code>文件后, 加入<code>grub.cfg</code>的路径有问题, 则需要我们手动找到<code>grub.cfg</code>并且加载:</p><p><img src="/LoongsonGuide/images/uefi/9.png" alt="GRUB命令行操作"></p><p>逐个说明上述命令: 首先<code>ls</code>命令能够看到当前能够识别的设别, 其中<code>hd0</code>表示一块硬盘(Hard Disk0), 如果有多个硬盘将以<code>hdx</code>的形式显示. </p><p>但是<code>hd0</code>并不具有文件系统, <code>(hd0,msdos2)</code>这种形式才表示有文件系统, <code>msdos</code>指MBR的分区格式, <code>msdos2</code>也就表示<code>MBR</code>硬盘上第二个分区.</p><p>然后逐级用<code>ls</code>命令找到<code>grub.cfg</code>的路径:<code>(hd0,msdos2)/boot/grub/grub.cfg</code>.</p><p>最后通过<code>configfile</code>命令, 解析<code>grub.cfg</code>文件, 即可重新回到GRUB的主界面.</p><h2 id="3-没有grub-cfg怎么办"><a href="#3-没有grub-cfg怎么办" class="headerlink" title="3. 没有grub.cfg怎么办?"></a>3. 没有grub.cfg怎么办?</h2><p>有时候, 我们会遇到有<code>grub</code>, 但是没有<code>grub.cfg</code>的情况, 这时, 我们可以稍微背下来两条命令, 这两条也就是<code>grub.cfg</code>中加载内核和加载<code>initrd</code>的命令: <code>linux</code>命令和<code>initrd</code>命令</p><p><code>linux</code>命令后面加内核的路径, 以及内核启动参数</p><p><code>initrd</code>命令后面加initrd的路径即可.</p><p>然后执行boot即可启动. 如下图:</p><p><img src="/LoongsonGuide/images/uefi/10.png" alt="grub命令启动内核"></p>]]></content>
      
      
      <categories>
          
          <category> 1. 固件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Qemu使用</title>
      <link href="/LoongsonGuide/2023/mywiki/qemu/"/>
      <url>/LoongsonGuide/2023/mywiki/qemu/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S qemu-system-loongarch64</span><br><span class="line">wget https://github.com/loongson/Firmware/raw/main/LoongArchVirtMachine/edk2-loongarch64-code.fd -O edk2-loongarch64-code.fd</span><br><span class="line">qemu-system-loongarch64 -m 4G -smp 1 --cpu la464 --machine virt -bios edk2-loongarch64-code.fd  --serial stdi</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 3. 应用 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PMON的使用方法</title>
      <link href="/LoongsonGuide/2023/mywiki/pmon/"/>
      <url>/LoongsonGuide/2023/mywiki/pmon/</url>
      
        <content type="html"><![CDATA[<h2 id="1-查看设备"><a href="#1-查看设备" class="headerlink" title="1. 查看设备"></a>1. 查看设备</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; devls</span><br><span class="line">syn0</span><br><span class="line">wd0</span><br><span class="line">usb0</span><br></pre></td></tr></table></figure><p><code>sync0</code>, <code>igb0</code>, <code>em0</code> 等字样,表示网络设备, 即网卡</p><p><code>wd0</code>, <code>nvme0</code>, <code>usb0</code>, <code>cd0</code>等字样表示存储设备, 即硬盘, <code>U</code>盘等.</p><h2 id="2-查看pci信息"><a href="#2-查看pci信息" class="headerlink" title="2. 查看pci信息"></a>2. 查看pci信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; pciscan</span><br><span class="line">&gt;&gt; BUS  0 &lt;&lt;</span><br><span class="line">Dev Fun Device description</span><br><span class="line">--------------------------</span><br><span class="line">  0   0 vendor/product: 0x0014/0x7a00 (bridge, host, interface: 0x00, revision: 0x00)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  0   1 vendor/product: 0x0014/0x7a10 (bridge, host, interface: 0x00, revision: 0x01)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  0   2 vendor/product: 0x0014/0x7a20 (bridge, host, interface: 0x00, revision: 0x01)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  0   3 vendor/product: 0x0014/0x7a30 (bridge, host, interface: 0x00, revision: 0x00)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  4   0 vendor/product: 0x0014/0x7a24 (serialbus, USB, interface: 0x10, revision: 0x02)</span><br><span class="line">64-bit mem,low address</span><br><span class="line">0x59648004:0xffff8004 mem @0x59648000, 32768 bytes</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  ......</span><br><span class="line">  ......</span><br></pre></td></tr></table></figure><h2 id="3-产看固件版本信息"><a href="#3-产看固件版本信息" class="headerlink" title="3. 产看固件版本信息"></a>3. 产看固件版本信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; vers</span><br><span class="line">PMON: PMON 5.0.3-Release (loongson) #233: Wed Oct 18 15:09:40 CST 2023 commit d044be8f495e97082c8905b131d525ef31ade0b9 Author: Xiangdong Meng &lt;mengxiangdong@loongson.cn&gt; Date:   Wed Sep 6 15:15:31 2023 +0800</span><br></pre></td></tr></table></figure><h2 id="4-查看寄存器信息"><a href="#4-查看寄存器信息" class="headerlink" title="4. 查看寄存器信息"></a>4. 查看寄存器信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; d8 0x800000001fe00020 2</span><br><span class="line">800000001fe00020 : 0000303030364133 0000000000000000 3A6000..........</span><br></pre></td></tr></table></figure><h2 id="5-查看磁盘信息"><a href="#5-查看磁盘信息" class="headerlink" title="5. 查看磁盘信息"></a>5. 查看磁盘信息</h2><p>这里<code>fdisk</code>命令后面的设备名是在第一节中<code>devls</code>命令列出来的.</p><p><code>PMON</code>支持<code>GPT</code>和<code>MBR</code>分区</p><p><code>PMON</code>暂不支持设备热插拔.</p><p><code>MBR</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fdisk usb0</span><br><span class="line"></span><br><span class="line">Device    Boot  Start       End         Sectors     Id        System</span><br><span class="line">usb0a           2048        122880000   122877952   83        Linux</span><br></pre></td></tr></table></figure><p><code>GPT</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fdisk usb0</span><br><span class="line"></span><br><span class="line">Device    Boot  Start       End         Sectors     Id        System</span><br><span class="line">usb0a           2048        122877951   122875904   0FC63DAF  Linux filesystem</span><br></pre></td></tr></table></figure><h2 id="6-查看磁盘中的文件"><a href="#6-查看磁盘中的文件" class="headerlink" title="6. 查看磁盘中的文件"></a>6. 查看磁盘中的文件</h2><p><code>/dev/fs/</code>后的字符是<code>fdisk usb0</code>命令中, <code>Device</code>一列中显示的内容.</p><p><code>PMON</code>只支持<code>Fat</code>, <code>Ext2/3/4</code>, <code>ISO9660</code>等分区</p><p><code>PMON</code>在查看文件时, 通常不用指定文件系统类型.</p><p>比如加载一个<code>fat</code>分区的内容: <code>load /dev/fs/usb0/</code>和<code>load /dev/fs/fat@usb0/</code>的效果是一样的</p><p><code>Fat</code>分区:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load /dev/fs/usb0/</span><br><span class="line">gz.mxd                                  &lt;FILE&gt;         993222</span><br><span class="line">boot.cfg                                &lt;FILE&gt;         403</span><br><span class="line">vm.mxd                                  &lt;FILE&gt;         95024056</span><br><span class="line"></span><br><span class="line">/dev/fs/fat@usb0/: Is a directory</span><br></pre></td></tr></table></figure><p><code>ext2</code>&#x2F;<code>ext3</code>&#x2F;<code>ext4</code>分区:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load /dev/fs/usb1a/</span><br><span class="line">|./ ../ lost+found/ gz.mxd boot.cfg</span><br><span class="line">/dev/fs/ext4@usb1a/: Undefined error: 0</span><br></pre></td></tr></table></figure><p><img src="/LoongsonGuide/images/pmon/1.png" alt="load MBR"></p><h2 id="7-加载内核"><a href="#7-加载内核" class="headerlink" title="7. 加载内核"></a>7. 加载内核</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load /dev/fs/usb0a/vm.mxd</span><br><span class="line">\Loading file: /dev/fs/fat@usb0a/vm.mxd (elf)</span><br><span class="line">(elf)</span><br><span class="line">0x9000000000200000/20053784 + 0x151ff18/922672(z) + 31926 syms|</span><br><span class="line">Entry address is 00c01000</span><br></pre></td></tr></table></figure><h2 id="8-加载initrd"><a href="#8-加载initrd" class="headerlink" title="8. 加载initrd"></a>8. 加载initrd</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; initrd /dev/fs/usb0a/initrd.img-4.19.0-19-loongson-3</span><br><span class="line">Loading initrd image /dev/fs/usb0a/initrd.img-4.19.0-19-loongson--dl_offset 9000000090000000 addr 9000000090000000</span><br><span class="line">(bin)</span><br></pre></td></tr></table></figure><h2 id="9-启动内核"><a href="#9-启动内核" class="headerlink" title="9. 启动内核"></a>9. 启动内核</h2><p>必须要在加载内核之后执行:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; g console=ttyS0,115200 earlycon=uart,mmio,0x1fe001e0 root=/dev/sda3</span><br><span class="line">Warning! NVRAM checksum fail. Reset!</span><br><span class="line">Reached finished_ap_limit=7 in a5 microseconds</span><br><span class="line">BootCore ID: 0 Collect AP: 7 Total Core: 8</span><br><span class="line">ACPI: ACPI tables init.</span><br><span class="line">VBIOS crc check is wrong,use default setting!</span><br><span class="line">GMEM: Get vbios from ls3a spi done!</span><br><span class="line">Init acpi table OK!</span><br><span class="line">set coherent</span><br><span class="line">[    0.000000] Linux version 4.19.190+ (mengxiangdong@5.5) (gcc version 8.3.0 (GCC)) #9 SMP Tue Oct 17 11:14:31 CST 2023</span><br><span class="line">[    0.000000] 64-bit Loongson Processor probed (LA664 Core)</span><br><span class="line">[    0.000000] CPU0 revision is: 0014d000 (Loongson-64bit)</span><br><span class="line">[    0.000000] FPU0 revision is: 00000001</span><br><span class="line">[    0.000000] efi:  SMBIOS=0xfffe000  ACPI 2.0=0xfefe000  NEWMEM=0xb036800</span><br><span class="line">[    0.000000] earlycon: uart0 at MMIO 0x000000001fe001e0 (options &#x27;&#x27;)</span><br><span class="line">[    0.000000] bootconsole [uart0] enabled</span><br><span class="line">[    0.000000] ACPI: Early table checksum verification disabled</span><br><span class="line">[    0.000000] ACPI: RSDP 0x000000000FEFE000 000024 (v02 LOONGS)</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="10-加载引导文件"><a href="#10-加载引导文件" class="headerlink" title="10. 加载引导文件"></a>10. 加载引导文件</h2><p><code>UEFI</code>通过找到<code>grub.efi</code>, 接着找到<code>grub.cfg</code>, 进而引导内核</p><p>而<code>PMON</code>只需要找到<code>boot.cfg</code>文件即可. <code>PMON</code>默认会从<code>/</code>和<code>/boot</code>目录中找<code>boot.cfg</code></p><p>倘若没有找到, 可以手动加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; bl /dev/fs/fat@usb0a/boot.cfg</span><br><span class="line"></span><br><span class="line">������������������������������������������������Ŀ</span><br><span class="line">�                 Boot Menu List                 �</span><br><span class="line">������������������������������������������������Ĵ</span><br><span class="line">� -&gt; 1 Loongnix 20 GNU/Linux 4.19.0-19-loongson-3�</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">� Please Select Boot Menu [1]                    �</span><br><span class="line">��������������������������������������������������</span><br><span class="line">Use the UP and DOWN keys to select the entry.</span><br><span class="line">Press ENTER to boot selected OS.</span><br><span class="line">Press &#x27;c&#x27; to command-line.</span><br><span class="line">                                                 Booting system in [2] second(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="11-查看文件"><a href="#11-查看文件" class="headerlink" title="11. 查看文件"></a>11. 查看文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; devcp /dev/fs/fat@usb0a/boot.cfg /dev/tty0</span><br><span class="line"></span><br><span class="line">default 0</span><br><span class="line">timeout 3</span><br><span class="line">showmenu 0</span><br><span class="line"></span><br><span class="line">title Loongnix 20 GNU/Linux 4.19.0-19-loongson-3</span><br><span class="line">    kernel /dev/fs/fat@usb0a/vmlinuz-4.19.0-19-loongson-3</span><br><span class="line">    initrd /dev/fs/fat@usb0a/initrd.img-4.19.0-19-loongson-3</span><br><span class="line">    args   root=/dev/sda3 console=ttyS0,115200 loglevel=8</span><br></pre></td></tr></table></figure><h2 id="12-配置网络"><a href="#12-配置网络" class="headerlink" title="12. 配置网络"></a>12. 配置网络</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; devls</span><br><span class="line">Device name  Type</span><br><span class="line">syn0         IFNET</span><br><span class="line">usb0         DISK</span><br><span class="line">PMON&gt; ifconfig syn0 192.168.1.13</span><br><span class="line">synopGMAC_linux_open called</span><br><span class="line">Version = 0xd137</span><br><span class="line">MacAddr = 0x3e  0xd0    0x62    0xf5    0x46    0x94</span><br><span class="line"></span><br><span class="line">===phy HALFDUPLEX MODE</span><br><span class="line">DMA status reg = 0x0 before cleared!</span><br><span class="line">DMA status reg = 0x0 after cleared!</span><br><span class="line">register poll interrupt: gmac 0</span><br><span class="line">==arp_ifinit done</span><br><span class="line">===phy FULLDUPLEX MODE</span><br><span class="line">Link is with 1000M Speed</span><br><span class="line"></span><br><span class="line">PMON&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="13-加载网络文件"><a href="#13-加载网络文件" class="headerlink" title="13. 加载网络文件"></a>13. 加载网络文件</h2><p><code>PMON</code>支持从网络加载内核, 支持的协议有<code>http</code>和<code>tftp</code></p><p><code>http</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load http://192.168.1.4/vm.mxd</span><br><span class="line">\Loading file: http://192.168.1.4/vm.mxd (elf)</span><br><span class="line">(elf)</span><br><span class="line">0x9000000000200000/20053784 + 0x151ff18/922672(z) + 31926 syms|</span><br><span class="line">Entry address is 00c01000</span><br></pre></td></tr></table></figure><p><code>tftp</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load tftp://192.168.1.4/vm.mxd</span><br><span class="line">\Loading file: tftp://192.168.1.4/vm.mxd (elf)</span><br><span class="line">(elf)</span><br><span class="line">0x9000000000200000/20053784 + 0x151ff18/922672(z) + 31926 syms|</span><br><span class="line">Entry address is 00c01000</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="14-更新固件"><a href="#14-更新固件" class="headerlink" title="14. 更新固件"></a>14. 更新固件</h2><p><code>PMON</code>更新固件的命令为<code>fload</code></p><p>与加载内核类似, 可以从硬盘加载, 也可以从网络加载</p><p>从硬盘加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload /dev/fs/usb0a/gz.mxd</span><br><span class="line">Loading file: /dev/fs/fat@usb0a/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从<code>tftp</code>服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload tftp://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: tftp://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从<code>http</code>服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload http://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: http://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 1. 固件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Qemu启动内核</title>
      <link href="/LoongsonGuide/2023/mywiki/kernel/"/>
      <url>/LoongsonGuide/2023/mywiki/kernel/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pacman -S qemu-img</span><br><span class="line">qemu-system-loongarch64 \</span><br><span class="line">    -m 5G \</span><br><span class="line">    -cpu la464 \</span><br><span class="line">    -machine virt \</span><br><span class="line">    -smp 4 \</span><br><span class="line">    -bios edk2-loongarch64-code.fd \</span><br><span class="line">    -serial stdio \</span><br><span class="line">    -device virtio-gpu-pci \</span><br><span class="line">    -net nic -net user \</span><br><span class="line">    -device nec-usb-xhci,id=xhci,addr=0x1b \</span><br><span class="line">    -device usb-tablet,id=tablet,bus=xhci.0,port=1 \</span><br><span class="line">    -device usb-kbd,id=keyboard,bus=xhci.0,port=2 \</span><br><span class="line">    -hda /home/mxd/gitrepo/qemu-kernel-debug/Loongnix-20.5.mate.mini.loongarch64.cn.qcow2 \</span><br><span class="line">    -boot once=d</span><br><span class="line">    -vnc none</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 2. 系统 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>如何更新固件</title>
      <link href="/LoongsonGuide/2023/mywiki/firmware/"/>
      <url>/LoongsonGuide/2023/mywiki/firmware/</url>
      
        <content type="html"><![CDATA[<h2 id="在PMON下更新固件"><a href="#在PMON下更新固件" class="headerlink" title="在PMON下更新固件"></a>在PMON下更新固件</h2><p>详情<a href="../pmon">PMON使用方法</a></p><p>从硬盘加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload /dev/fs/usb0a/gz.mxd</span><br><span class="line">Loading file: /dev/fs/fat@usb0a/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从tftp服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload tftp://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: tftp://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从http服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload http://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: http://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><h2 id="在UEFI下更新固件"><a href="#在UEFI下更新固件" class="headerlink" title="在UEFI下更新固件"></a>在UEFI下更新固件</h2><p>详情<a href="../uefi">uefi使用方法</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">UEFI Interactive Shell v2.2</span><br><span class="line">EDK II</span><br><span class="line">UEFI v2.70 (EDK II, 0x00010000)</span><br><span class="line">Mapping table</span><br><span class="line">      FS0: Alias(s):HD0c0:;BLK0:</span><br><span class="line">          PciRoot(0x0)/Pci(0x19,0x0)/USB(0x2,0x0)</span><br><span class="line">Press ESC in 5 seconds to skip startup.nsh or any other key to continue.</span><br><span class="line">Shell&gt; FS0:</span><br><span class="line">FSOpen: Open &#x27;\&#x27; Success</span><br><span class="line">FS0:\&gt; ls</span><br><span class="line">Directory of: FS0:\</span><br><span class="line">10/17/2023  07:47           4,194,304  uefi.mxd</span><br><span class="line">          1 File(s)   4,194,304 bytes</span><br><span class="line">          0 Dir(s)</span><br><span class="line">FSOpen: Open &#x27;\&#x27; Success</span><br><span class="line">FS0:\&gt; spi -u uefi.mxd</span><br><span class="line">Erase   : ******************************************************************************************</span><br><span class="line">****************************************************************************************************</span><br><span class="line">******************************************************************   Erase OK.</span><br><span class="line">Program : ******************************************************************************************</span><br><span class="line">****************************************************************************************************</span><br><span class="line">******************************************************************   Program OK.</span><br><span class="line">FS0:\&gt;</span><br></pre></td></tr></table></figure><p><img src="/LoongsonGuide/images/firmware/1.png" alt="UEFI Shell下烧写固件"></p><h2 id="在系统下更新固件"><a href="#在系统下更新固件" class="headerlink" title="在系统下更新固件"></a>在系统下更新固件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@loongson-pc:/home/loongson# git clone https://github.com/MarsDoge/OsTools.git</span><br><span class="line">root@loongson-pc:/home/loongson# cd OsTools</span><br><span class="line">root@loongson-pc:/home/loongson# ./build.sh</span><br><span class="line">root@loongson-pc:/home/loongson/OsTools# ./OsTools spi -u -f uefi.mxd</span><br><span class="line">mmap addr start : 0xfff78bc1f0</span><br><span class="line">------------Read Buf Get Success!-----------</span><br><span class="line">Erase   :</span><br><span class="line">[========================================================================] 100%</span><br><span class="line">Program :</span><br><span class="line">[========================================================================] 100%</span><br><span class="line">--------------Release mem Map----------------</span><br><span class="line">root@loongson-pc:/home/loongson/OsTools# reboot</span><br></pre></td></tr></table></figure><h2 id="在系统下备份当前固件"><a href="#在系统下备份当前固件" class="headerlink" title="在系统下备份当前固件"></a>在系统下备份当前固件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@loongson-pc:/home/loongson# git clone https://github.com/MarsDoge/OsTools.git</span><br><span class="line">root@loongson-pc:/home/loongson# cd OsTools</span><br><span class="line">root@loongson-pc:/home/loongson# ./build.sh</span><br><span class="line">root@loongson-pc:/home/loongson# ./OsTools spi -d -f backup.dump.fd</span><br><span class="line">mmap addr start : 0x7ffff07fc1f0</span><br><span class="line">--------------Release mem Map----------------</span><br><span class="line">root@loongson-pc:/home/loongson# ls backup.dump.fd</span><br><span class="line">backup.dump.fd</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 1. 固件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>3A6000上搭建hexo博客</title>
      <link href="/LoongsonGuide/2023/mywiki/blog/"/>
      <url>/LoongsonGuide/2023/mywiki/blog/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S nodejs npm git</span><br><span class="line">npm config set proxy=&quot;http://127.0.0.1:7890&quot;</span><br><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir loongsonwiki</span><br><span class="line">cd loongsonwiki</span><br><span class="line">hexo init</span><br><span class="line">git clone  https://github.com/hdxw/hexo-theme-prowiki.git themes/hexo-theme-prowiki</span><br><span class="line">git submodule add  https://github.com/hdxw/hexo-theme-prowiki.git themes/hexo-theme-prowiki</span><br><span class="line">vim _config.yml</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/_config.yml b/_config.yml</span><br><span class="line">index 02b67a4..2391977 100644</span><br><span class="line">--- a/_config.yml</span><br><span class="line">+++ b/_config.yml</span><br><span class="line">@@ -97,7 +97,7 @@ ignore:</span><br><span class="line"> # Extensions</span><br><span class="line"> ## Plugins: https://hexo.io/plugins/</span><br><span class="line"> ## Themes: https://hexo.io/themes/</span><br><span class="line">-theme: landscape</span><br><span class="line">+theme: hexo-theme-prowiki</span><br><span class="line"></span><br><span class="line"> # Deployment</span><br><span class="line"> ## Docs: https://hexo.io/docs/one-command-deployment</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 3. 应用 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
