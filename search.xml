<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>文章索引</title>
      <link href="/LoongsonGuide/2023/mywiki/Readme/"/>
      <url>/LoongsonGuide/2023/mywiki/Readme/</url>
      
        <content type="html"><![CDATA[<center><img src="/LoongsonGuide/images/logo.png" alt="Logo" style="diplay:none;width:255px;"></center><h2 id="0-索引"><a href="#0-索引" class="headerlink" title="0. 索引"></a>0. 索引</h2><ol><li><a href="../Readme">文章索引</a></li></ol><h2 id="1-固件"><a href="#1-固件" class="headerlink" title="1. 固件"></a>1. 固件</h2><ol><li><a href="../firmware">如何更新固件</a></li><li><a href="../pmon">PMON的使用方法</a></li><li><a href="../uefi">从UEFI如何启动到系统</a></li></ol><h2 id="2-系统"><a href="#2-系统" class="headerlink" title="2. 系统"></a>2. 系统</h2><ol><li><a href="../kernel">Qemu启动内核</a></li></ol><h2 id="3-应用"><a href="#3-应用" class="headerlink" title="3. 应用"></a>3. 应用</h2><ol><li><a href="../blog">3A6000上搭建hexo博客</a></li><li><a href="../gogs">3A6000上搭建gogs</a></li><li><a href="../qemu">Qemu使用</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 0. 索引 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>3A6000上搭建gogs</title>
      <link href="/LoongsonGuide/2023/mywiki/gogs/"/>
      <url>/LoongsonGuide/2023/mywiki/gogs/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">pacman -S mariadb</span><br><span class="line">mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql</span><br><span class="line">systemctl start mysql</span><br><span class="line">mariadb --initialize-insecure --user=mysql --datadir=&#x27;./data&#x27;</span><br><span class="line">mysql -u root</span><br><span class="line"></span><br><span class="line">[root@mxd gitrepo]# mysql -u root</span><br><span class="line">mysql: Deprecated program name. It will be removed in a future release, use &#x27;/usr/bin/mariadb&#x27; instead</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 8</span><br><span class="line">Server version: 11.0.2-MariaDB Arch Linux</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create user &#x27;gogs&#x27;@&#x27;localhost&#x27; identified by &#x27;passwd&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; select user,host from mysql.user;</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| User        | Host      |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| PUBLIC      |           |</span><br><span class="line">|             | localhost |</span><br><span class="line">| gogs        | localhost |</span><br><span class="line">| mariadb.sys | localhost |</span><br><span class="line">| mysql       | localhost |</span><br><span class="line">| root        | localhost |</span><br><span class="line">|             | mxd       |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">7 rows in set (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE gogs;</span><br><span class="line">Query OK, 1 row affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| gogs               |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; grant all privileges on gogs.* to &#x27;gogs&#x27;@&#x27;%&#x27; identified by &#x27;passwd&#x27; with grant option;</span><br><span class="line">Query OK, 0 rows affected (0.001 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>build gogs:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pacman -S go node npm</span><br><span class="line">git clone --depth 1 https://github.com/gogs/gogs.git gogs</span><br><span class="line">cd gogs</span><br><span class="line">go build -o gogs</span><br><span class="line">./gogs web</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 3. 应用 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>从UEFI如何启动到系统</title>
      <link href="/LoongsonGuide/2023/mywiki/uefi/"/>
      <url>/LoongsonGuide/2023/mywiki/uefi/</url>
      
        <content type="html"><![CDATA[<h2 id="UEFI须知"><a href="#UEFI须知" class="headerlink" title="UEFI须知"></a>UEFI须知</h2><h2 id="1-进入UEFI-setup界面"><a href="#1-进入UEFI-setup界面" class="headerlink" title="1. 进入UEFI setup界面"></a>1. 进入UEFI setup界面</h2><p>在串口或者显示界面下显示<code>BDS</code>字样的时候(如下图), 稍微按按上下键即可进入<code>Setup</code>界面<br><img src="/LoongsonGuide/images/uefi/1.png" alt="UEFI Booting"></p><h2 id="2-Setup界面"><a href="#2-Setup界面" class="headerlink" title="2. Setup界面"></a>2. Setup界面</h2><p>无论是<code>Intel</code>还是<code>loongson</code>, <code>BIOS</code>下都有设置的接口, <code>PMON</code>也有, 无非是显示样式差异, 原理相通. <code>Loongson</code>的<code>UEFI</code>界面如下图</p><p>不同的条目, 用于设置不同的功能. 其中普通用户通常只需要进入<code>BootManager</code>界面选择相应的启动目标即可.<br><img src="/LoongsonGuide/images/uefi/2.png" alt="Setup"></p><h2 id="3-BootManager界面"><a href="#3-BootManager界面" class="headerlink" title="3. BootManager界面"></a>3. BootManager界面</h2><p>在下图区域<code>1</code>中为条目名称, 区域<code>2</code>中为<code>UEFI</code>下解析的路径名(有点专业,不用理解), 总之, 左边看不懂时就看右边, 找相关的关键字, 比如下图, 左侧是设备名, 不太能看出是什么设备, 右侧则有<code>Sata</code>字样可以识别.<br><img src="/LoongsonGuide/images/uefi/3.png" alt="BootManager"></p><h2 id="4-Shell下操作"><a href="#4-Shell下操作" class="headerlink" title="4. Shell下操作"></a>4. Shell下操作</h2><p>通常, 正常情况下, 系统直接启动, 用户无法感知上述界面的存在, 但当出现一些问题时, 我们可能需要进入<code>Shell</code>下进行操作, 如上图中的第二个条目, 选中后回车进入下图界面:<br><img src="/LoongsonGuide/images/uefi/4.png" alt="Shell"></p><h3 id="4-1-显示启动设备"><a href="#4-1-显示启动设备" class="headerlink" title="4.1. 显示启动设备"></a>4.1. 显示启动设备</h3><p>正常情况下， 进入<code>Shell</code>后仍然会提示启动相关的设备, 如上图, 倘若由于操作过多, 或者显示<code>bug</code>等, 我们还想再次看到相关的显示, 则需要通过<code>map</code>命令再次显示，如下图：</p><p><img src="/LoongsonGuide/images/uefi/5.png" alt="map命令"></p><p>可以看到, 其实和默认进入<code>Shell</code>的打印是一样的, 不过为了防止打印被冲刷掉, 还是要会一下.</p><h3 id="4-2-进入设备及查看文件"><a href="#4-2-进入设备及查看文件" class="headerlink" title="4.2. 进入设备及查看文件"></a>4.2. 进入设备及查看文件</h3><p>看上图, 图中黄色字体, <code>FS0:</code> , <code>BLK0:</code>等, 可以理解为不同设备的重命名, 其中<code>FS</code>开头的标识表示该设备的文件系统可以识别, <code>BLK</code>开头的表示表示该设备不存在文件系统, 或者文件系统不可识别. 总之对我们有意义的就只有<code>FS</code>开头的标识.</p><p>只有含有文件系统的设备我们才能访问, 所以<code>UEFI</code>下需要访问的<code>GRUB</code>, 内核等<code>EFI</code>文件一定是放在<code>UEFI</code>下能够识别的文件系统中的. 也就是<code>FS</code>开头的设备.</p><p>如何访问文件系统中的文件呢, 先看下图:</p><p><img src="/LoongsonGuide/images/uefi/6.png" alt="文件操作"></p><p>进入设备时比较特殊, 输入<code>FS0:</code>即可,不能是<code>cd FS0:</code>, 也不能不加后面的冒号.</p><p>进入设备之后就和linux的操作很类似了, 使用<code>cd</code>, <code>ls</code>即可.</p><p>然后<code>ls</code>看到的緑色显示的文件, 也就是UEFI下的可执行文件–EFI文件. 运行时也无需像linux那样在前面加路径才能执行, UEFI下直接输入文件名即可.</p><p>哦, 值得一提, UEFI下可以通过<code>Tab</code>键实现文件名补全.</p><h3 id="4-3-UEFI下的其他操作"><a href="#4-3-UEFI下的其他操作" class="headerlink" title="4.3. UEFI下的其他操作"></a>4.3. UEFI下的其他操作</h3><p>如第一节的内容, <code>UEFI</code>下的界面下通常会有很多选项, 其中用户比较关心的选项大概有:</p><ol><li>快速启动: 忽略部分设备初始化, 启动速度加快, 比如x86部分机器需要关闭此选项才能更改启动顺序, 选择系统安装盘.</li><li>安全启动: 开启安全校验, 部分外插设备未经过校验可能无法识别, 所以x86装机时可能也需要关闭此项, 防止U盘无法识别.</li><li>传统模式: 通常是用于兼容很久的系统启动. 比如龙芯的机器开启传统模式可以安装旧世界系统, 关闭则安装新世界系统, x86下可能叫CSM…, 开启则可以引导MBR分区的硬盘, 关闭则引导GPT格式硬盘.</li><li>高级选项:一些高级的功能开关, 普通用户可能不需要使用, 比如上述传统模式, 龙芯的机器将其放在了高级选项中, 英文是LegacyMode, (看不懂这种英文的同学自我PUA一下). 其他如有需求请在工程师指导下使用.</li></ol><h3 id="4-4-UEFI下的一些Shell命令"><a href="#4-4-UEFI下的一些Shell命令" class="headerlink" title="4.4. UEFI下的一些Shell命令"></a>4.4. UEFI下的一些Shell命令</h3><p>比如<code>pci</code>命令, 具体可以通过<code>pci -?</code>查看具体使用方法, 这里不详细演示.</p><p>常用的命令有:<code>cd</code>, <code>ls</code>, <code>map</code>, <code>pci</code>, <code>mm</code>, <code>dmem</code>, <code>ifconfig</code>, <code>edit</code>, <code>vers</code>等.</p><h2 id="5-UEFI下更新固件方法"><a href="#5-UEFI下更新固件方法" class="headerlink" title="5. UEFI下更新固件方法"></a>5. UEFI下更新固件方法</h2><p>还有<code>spi</code>命令不得不单独强调, 一个产品往往需要保持更新才能更好的满足用户的需求. 固件是尤其重要的一点.</p><p>当我们需要更新固件(UEFI和PMON都是固件)时, 在<code>Shell</code>下找到文件后, 通过<code>spi -u filename</code>的命令, 即可完成固件更新.</p><p>当然图形界面下也有相关接口, 可以自己理解一下英文再操作.</p><h2 id="GRUB"><a href="#GRUB" class="headerlink" title="GRUB"></a>GRUB</h2><h2 id="GRUB界面"><a href="#GRUB界面" class="headerlink" title="GRUB界面"></a>GRUB界面</h2><p><img src="/LoongsonGuide/images/uefi/7.png" alt="GRUB主界面"></p><p>如图, GRUB界面下列出了几个选项, 其中第一项<code>vm.mxd</code>是我自己加的内核, 第二项<code>Loongnix GNU/Linux</code>是系统自带内核, 第三项<code>Advanced options for Loongnix GNU/Linux</code>是高级选项, 通常包含一些恢复模式的选项, 第四项是<code>System Setup</code>–系统设置, 其实就是进入<code>UEFI Setup</code>界面.</p><p>然后在界面的最下方:</p><blockquote><p>Use the ^ and v keys to select which entry is highlighted.<br>Press enter to boot the selected OS, <code>e</code> to edit the commands<br>before booting or <code>c</code> for a command-line.                    </p></blockquote><p>翻译一下:</p><blockquote><p>通过按上下键选择选项, 按执行进入选项, 按<code>e</code>去编辑选项, 按<code>c</code>进入<code>GRUB</code>的命令行.</p></blockquote><h2 id="1-编辑GRUB选项"><a href="#1-编辑GRUB选项" class="headerlink" title="1. 编辑GRUB选项"></a>1. 编辑GRUB选项</h2><p>通常我们通过<code>UEFI</code>执行<code>GRUB</code>的<code>efi</code>文件即可进入<code>GRUB</code>界面, 然后回车便可以启动内核, 但是倘若内核无法正常启动, 我们需要加串口调试, 就需要我们按<code>e</code>去编辑选项, 比如增加串口或者进入单用户模式等.</p><p>按<code>e</code>后进入下图, 我们可以将光标通过上下左右按键, 移动至<code>linux</code>开头的那一行, 并在行末加入想要的参数比如串口<code>console=ttyS0,115200 earlycon=uart,mmio,0x1fe001e0</code>.</p><p><img src="/LoongsonGuide/images/uefi/8.png" alt="GRUB编辑"></p><p>可以看到, 界面最下面仍然有一些文字, 告诉我们按下<code>Ctrl-X</code>组合键或者<code>F10</code>可以直接启动, 按下<code>Ctrl-c</code>或<code>F2</code>进入到<code>GRUB</code>命令行, 按下<code>ESC</code>可以退回上一步.</p><h2 id="2-手动找grub-cfg"><a href="#2-手动找grub-cfg" class="headerlink" title="2. 手动找grub.cfg"></a>2. 手动找grub.cfg</h2><p>当我们在<code>UEFI</code>下执行<code>GRUB</code>的<code>efi</code>文件后, 加入<code>grub.cfg</code>的路径有问题, 则需要我们手动找到<code>grub.cfg</code>并且加载:</p><p><img src="/LoongsonGuide/images/uefi/9.png" alt="GRUB命令行操作"></p><p>逐个说明上述命令: 首先<code>ls</code>命令能够看到当前能够识别的设别, 其中<code>hd0</code>表示一块硬盘(Hard Disk0), 如果有多个硬盘将以<code>hdx</code>的形式显示. </p><p>但是<code>hd0</code>并不具有文件系统, <code>(hd0,msdos2)</code>这种形式才表示有文件系统, <code>msdos</code>指MBR的分区格式, <code>msdos2</code>也就表示<code>MBR</code>硬盘上第二个分区.</p><p>然后逐级用<code>ls</code>命令找到<code>grub.cfg</code>的路径:<code>(hd0,msdos2)/boot/grub/grub.cfg</code>.</p><p>最后通过<code>configfile</code>命令, 解析<code>grub.cfg</code>文件, 即可重新回到GRUB的主界面.</p><h2 id="3-没有grub-cfg怎么办"><a href="#3-没有grub-cfg怎么办" class="headerlink" title="3. 没有grub.cfg怎么办?"></a>3. 没有grub.cfg怎么办?</h2><p>有时候, 我们会遇到有<code>grub</code>, 但是没有<code>grub.cfg</code>的情况, 这时, 我们可以稍微背下来两条命令, 这两条也就是<code>grub.cfg</code>中加载内核和加载<code>initrd</code>的命令: <code>linux</code>命令和<code>initrd</code>命令</p><p><code>linux</code>命令后面加内核的路径, 以及内核启动参数</p><p><code>initrd</code>命令后面加initrd的路径即可.</p><p>然后执行boot即可启动. 如下图:</p><p><img src="/LoongsonGuide/images/uefi/10.png" alt="grub命令启动内核"></p>]]></content>
      
      
      <categories>
          
          <category> 1. 固件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Qemu使用</title>
      <link href="/LoongsonGuide/2023/mywiki/qemu/"/>
      <url>/LoongsonGuide/2023/mywiki/qemu/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S qemu-system-loongarch64</span><br><span class="line">wget https://github.com/loongson/Firmware/raw/main/LoongArchVirtMachine/edk2-loongarch64-code.fd -O edk2-loongarch64-code.fd</span><br><span class="line">qemu-system-loongarch64 -m 4G -smp 1 --cpu la464 --machine virt -bios edk2-loongarch64-code.fd  --serial stdi</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 3. 应用 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PMON的使用方法</title>
      <link href="/LoongsonGuide/2023/mywiki/pmon/"/>
      <url>/LoongsonGuide/2023/mywiki/pmon/</url>
      
        <content type="html"><![CDATA[<h2 id="1-查看设备"><a href="#1-查看设备" class="headerlink" title="1. 查看设备"></a>1. 查看设备</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; devls</span><br><span class="line">syn0</span><br><span class="line">wd0</span><br><span class="line">usb0</span><br></pre></td></tr></table></figure><p><code>sync0</code>, <code>igb0</code>, <code>em0</code> 等字样,表示网络设备, 即网卡</p><p><code>wd0</code>, <code>nvme0</code>, <code>usb0</code>, <code>cd0</code>等字样表示存储设备, 即硬盘, <code>U</code>盘等.</p><h2 id="2-查看pci信息"><a href="#2-查看pci信息" class="headerlink" title="2. 查看pci信息"></a>2. 查看pci信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; pciscan</span><br><span class="line">&gt;&gt; BUS  0 &lt;&lt;</span><br><span class="line">Dev Fun Device description</span><br><span class="line">--------------------------</span><br><span class="line">  0   0 vendor/product: 0x0014/0x7a00 (bridge, host, interface: 0x00, revision: 0x00)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  0   1 vendor/product: 0x0014/0x7a10 (bridge, host, interface: 0x00, revision: 0x01)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  0   2 vendor/product: 0x0014/0x7a20 (bridge, host, interface: 0x00, revision: 0x01)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  0   3 vendor/product: 0x0014/0x7a30 (bridge, host, interface: 0x00, revision: 0x00)</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  4   0 vendor/product: 0x0014/0x7a24 (serialbus, USB, interface: 0x10, revision: 0x02)</span><br><span class="line">64-bit mem,low address</span><br><span class="line">0x59648004:0xffff8004 mem @0x59648000, 32768 bytes</span><br><span class="line">0x00000000:0x00000000 mem @0x00000000, 0 bytes</span><br><span class="line">  ......</span><br><span class="line">  ......</span><br></pre></td></tr></table></figure><h2 id="3-产看固件版本信息"><a href="#3-产看固件版本信息" class="headerlink" title="3. 产看固件版本信息"></a>3. 产看固件版本信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; vers</span><br><span class="line">PMON: PMON 5.0.3-Release (loongson) #233: Wed Oct 18 15:09:40 CST 2023 commit d044be8f495e97082c8905b131d525ef31ade0b9 Author: Xiangdong Meng &lt;mengxiangdong@loongson.cn&gt; Date:   Wed Sep 6 15:15:31 2023 +0800</span><br></pre></td></tr></table></figure><h2 id="4-查看寄存器信息"><a href="#4-查看寄存器信息" class="headerlink" title="4. 查看寄存器信息"></a>4. 查看寄存器信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; d8 0x800000001fe00020 2</span><br><span class="line">800000001fe00020 : 0000303030364133 0000000000000000 3A6000..........</span><br></pre></td></tr></table></figure><h2 id="5-查看磁盘信息"><a href="#5-查看磁盘信息" class="headerlink" title="5. 查看磁盘信息"></a>5. 查看磁盘信息</h2><p>这里<code>fdisk</code>命令后面的设备名是在第一节中<code>devls</code>命令列出来的.</p><p><code>PMON</code>支持<code>GPT</code>和<code>MBR</code>分区</p><p><code>PMON</code>暂不支持设备热插拔.</p><p><code>MBR</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fdisk usb0</span><br><span class="line"></span><br><span class="line">Device    Boot  Start       End         Sectors     Id        System</span><br><span class="line">usb0a           2048        122880000   122877952   83        Linux</span><br></pre></td></tr></table></figure><p><code>GPT</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fdisk usb0</span><br><span class="line"></span><br><span class="line">Device    Boot  Start       End         Sectors     Id        System</span><br><span class="line">usb0a           2048        122877951   122875904   0FC63DAF  Linux filesystem</span><br></pre></td></tr></table></figure><h2 id="6-查看磁盘中的文件"><a href="#6-查看磁盘中的文件" class="headerlink" title="6. 查看磁盘中的文件"></a>6. 查看磁盘中的文件</h2><p><code>/dev/fs/</code>后的字符是<code>fdisk usb0</code>命令中, <code>Device</code>一列中显示的内容.</p><p><code>PMON</code>只支持<code>Fat</code>, <code>Ext2/3/4</code>, <code>ISO9660</code>等分区</p><p><code>PMON</code>在查看文件时, 通常不用指定文件系统类型.</p><p>比如加载一个<code>fat</code>分区的内容: <code>load /dev/fs/usb0/</code>和<code>load /dev/fs/fat@usb0/</code>的效果是一样的</p><p><code>Fat</code>分区:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load /dev/fs/usb0/</span><br><span class="line">gz.mxd                                  &lt;FILE&gt;         993222</span><br><span class="line">boot.cfg                                &lt;FILE&gt;         403</span><br><span class="line">vm.mxd                                  &lt;FILE&gt;         95024056</span><br><span class="line"></span><br><span class="line">/dev/fs/fat@usb0/: Is a directory</span><br></pre></td></tr></table></figure><p><code>ext2</code>&#x2F;<code>ext3</code>&#x2F;<code>ext4</code>分区:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load /dev/fs/usb1a/</span><br><span class="line">|./ ../ lost+found/ gz.mxd boot.cfg</span><br><span class="line">/dev/fs/ext4@usb1a/: Undefined error: 0</span><br></pre></td></tr></table></figure><p><img src="/LoongsonGuide/images/pmon/1.png" alt="load MBR"></p><h2 id="7-加载内核"><a href="#7-加载内核" class="headerlink" title="7. 加载内核"></a>7. 加载内核</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load /dev/fs/usb0a/vm.mxd</span><br><span class="line">\Loading file: /dev/fs/fat@usb0a/vm.mxd (elf)</span><br><span class="line">(elf)</span><br><span class="line">0x9000000000200000/20053784 + 0x151ff18/922672(z) + 31926 syms|</span><br><span class="line">Entry address is 00c01000</span><br></pre></td></tr></table></figure><h2 id="8-加载initrd"><a href="#8-加载initrd" class="headerlink" title="8. 加载initrd"></a>8. 加载initrd</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; initrd /dev/fs/usb0a/initrd.img-4.19.0-19-loongson-3</span><br><span class="line">Loading initrd image /dev/fs/usb0a/initrd.img-4.19.0-19-loongson--dl_offset 9000000090000000 addr 9000000090000000</span><br><span class="line">(bin)</span><br></pre></td></tr></table></figure><h2 id="9-启动内核"><a href="#9-启动内核" class="headerlink" title="9. 启动内核"></a>9. 启动内核</h2><p>必须要在加载内核之后执行:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; g console=ttyS0,115200 earlycon=uart,mmio,0x1fe001e0 root=/dev/sda3</span><br><span class="line">Warning! NVRAM checksum fail. Reset!</span><br><span class="line">Reached finished_ap_limit=7 in a5 microseconds</span><br><span class="line">BootCore ID: 0 Collect AP: 7 Total Core: 8</span><br><span class="line">ACPI: ACPI tables init.</span><br><span class="line">VBIOS crc check is wrong,use default setting!</span><br><span class="line">GMEM: Get vbios from ls3a spi done!</span><br><span class="line">Init acpi table OK!</span><br><span class="line">set coherent</span><br><span class="line">[    0.000000] Linux version 4.19.190+ (mengxiangdong@5.5) (gcc version 8.3.0 (GCC)) #9 SMP Tue Oct 17 11:14:31 CST 2023</span><br><span class="line">[    0.000000] 64-bit Loongson Processor probed (LA664 Core)</span><br><span class="line">[    0.000000] CPU0 revision is: 0014d000 (Loongson-64bit)</span><br><span class="line">[    0.000000] FPU0 revision is: 00000001</span><br><span class="line">[    0.000000] efi:  SMBIOS=0xfffe000  ACPI 2.0=0xfefe000  NEWMEM=0xb036800</span><br><span class="line">[    0.000000] earlycon: uart0 at MMIO 0x000000001fe001e0 (options &#x27;&#x27;)</span><br><span class="line">[    0.000000] bootconsole [uart0] enabled</span><br><span class="line">[    0.000000] ACPI: Early table checksum verification disabled</span><br><span class="line">[    0.000000] ACPI: RSDP 0x000000000FEFE000 000024 (v02 LOONGS)</span><br><span class="line">......</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="10-加载引导文件"><a href="#10-加载引导文件" class="headerlink" title="10. 加载引导文件"></a>10. 加载引导文件</h2><p><code>UEFI</code>通过找到<code>grub.efi</code>, 接着找到<code>grub.cfg</code>, 进而引导内核</p><p>而<code>PMON</code>只需要找到<code>boot.cfg</code>文件即可. <code>PMON</code>默认会从<code>/</code>和<code>/boot</code>目录中找<code>boot.cfg</code></p><p>倘若没有找到, 可以手动加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; bl /dev/fs/fat@usb0a/boot.cfg</span><br><span class="line"></span><br><span class="line">������������������������������������������������Ŀ</span><br><span class="line">�                 Boot Menu List                 �</span><br><span class="line">������������������������������������������������Ĵ</span><br><span class="line">� -&gt; 1 Loongnix 20 GNU/Linux 4.19.0-19-loongson-3�</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">�                                                �</span><br><span class="line">� Please Select Boot Menu [1]                    �</span><br><span class="line">��������������������������������������������������</span><br><span class="line">Use the UP and DOWN keys to select the entry.</span><br><span class="line">Press ENTER to boot selected OS.</span><br><span class="line">Press &#x27;c&#x27; to command-line.</span><br><span class="line">                                                 Booting system in [2] second(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="11-查看文件"><a href="#11-查看文件" class="headerlink" title="11. 查看文件"></a>11. 查看文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; devcp /dev/fs/fat@usb0a/boot.cfg /dev/tty0</span><br><span class="line"></span><br><span class="line">default 0</span><br><span class="line">timeout 3</span><br><span class="line">showmenu 0</span><br><span class="line"></span><br><span class="line">title Loongnix 20 GNU/Linux 4.19.0-19-loongson-3</span><br><span class="line">    kernel /dev/fs/fat@usb0a/vmlinuz-4.19.0-19-loongson-3</span><br><span class="line">    initrd /dev/fs/fat@usb0a/initrd.img-4.19.0-19-loongson-3</span><br><span class="line">    args   root=/dev/sda3 console=ttyS0,115200 loglevel=8</span><br></pre></td></tr></table></figure><h2 id="12-配置网络"><a href="#12-配置网络" class="headerlink" title="12. 配置网络"></a>12. 配置网络</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; devls</span><br><span class="line">Device name  Type</span><br><span class="line">syn0         IFNET</span><br><span class="line">usb0         DISK</span><br><span class="line">PMON&gt; ifconfig syn0 192.168.1.13</span><br><span class="line">synopGMAC_linux_open called</span><br><span class="line">Version = 0xd137</span><br><span class="line">MacAddr = 0x3e  0xd0    0x62    0xf5    0x46    0x94</span><br><span class="line"></span><br><span class="line">===phy HALFDUPLEX MODE</span><br><span class="line">DMA status reg = 0x0 before cleared!</span><br><span class="line">DMA status reg = 0x0 after cleared!</span><br><span class="line">register poll interrupt: gmac 0</span><br><span class="line">==arp_ifinit done</span><br><span class="line">===phy FULLDUPLEX MODE</span><br><span class="line">Link is with 1000M Speed</span><br><span class="line"></span><br><span class="line">PMON&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="13-加载网络文件"><a href="#13-加载网络文件" class="headerlink" title="13. 加载网络文件"></a>13. 加载网络文件</h2><p><code>PMON</code>支持从网络加载内核, 支持的协议有<code>http</code>和<code>tftp</code></p><p><code>http</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load http://192.168.1.4/vm.mxd</span><br><span class="line">\Loading file: http://192.168.1.4/vm.mxd (elf)</span><br><span class="line">(elf)</span><br><span class="line">0x9000000000200000/20053784 + 0x151ff18/922672(z) + 31926 syms|</span><br><span class="line">Entry address is 00c01000</span><br></pre></td></tr></table></figure><p><code>tftp</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; load tftp://192.168.1.4/vm.mxd</span><br><span class="line">\Loading file: tftp://192.168.1.4/vm.mxd (elf)</span><br><span class="line">(elf)</span><br><span class="line">0x9000000000200000/20053784 + 0x151ff18/922672(z) + 31926 syms|</span><br><span class="line">Entry address is 00c01000</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="14-更新固件"><a href="#14-更新固件" class="headerlink" title="14. 更新固件"></a>14. 更新固件</h2><p><code>PMON</code>更新固件的命令为<code>fload</code></p><p>与加载内核类似, 可以从硬盘加载, 也可以从网络加载</p><p>从硬盘加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload /dev/fs/usb0a/gz.mxd</span><br><span class="line">Loading file: /dev/fs/fat@usb0a/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从<code>tftp</code>服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload tftp://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: tftp://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从<code>http</code>服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload http://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: http://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 1. 固件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Qemu启动内核</title>
      <link href="/LoongsonGuide/2023/mywiki/kernel/"/>
      <url>/LoongsonGuide/2023/mywiki/kernel/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pacman -S qemu-img</span><br><span class="line">qemu-system-loongarch64 \</span><br><span class="line">    -m 5G \</span><br><span class="line">    -cpu la464 \</span><br><span class="line">    -machine virt \</span><br><span class="line">    -smp 4 \</span><br><span class="line">    -bios edk2-loongarch64-code.fd \</span><br><span class="line">    -serial stdio \</span><br><span class="line">    -device virtio-gpu-pci \</span><br><span class="line">    -net nic -net user \</span><br><span class="line">    -device nec-usb-xhci,id=xhci,addr=0x1b \</span><br><span class="line">    -device usb-tablet,id=tablet,bus=xhci.0,port=1 \</span><br><span class="line">    -device usb-kbd,id=keyboard,bus=xhci.0,port=2 \</span><br><span class="line">    -hda /home/mxd/gitrepo/qemu-kernel-debug/Loongnix-20.5.mate.mini.loongarch64.cn.qcow2 \</span><br><span class="line">    -boot once=d</span><br><span class="line">    -vnc none</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 2. 系统 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>如何更新固件</title>
      <link href="/LoongsonGuide/2023/mywiki/firmware/"/>
      <url>/LoongsonGuide/2023/mywiki/firmware/</url>
      
        <content type="html"><![CDATA[<h2 id="在PMON下更新固件"><a href="#在PMON下更新固件" class="headerlink" title="在PMON下更新固件"></a>在PMON下更新固件</h2><p>详情<a href="../pmon">PMON使用方法</a></p><p>从硬盘加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload /dev/fs/usb0a/gz.mxd</span><br><span class="line">Loading file: /dev/fs/fat@usb0a/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从tftp服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload tftp://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: tftp://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><p>从http服务器加载:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PMON&gt; fload http://192.168.1.4/gz.mxd</span><br><span class="line">Loading file: http://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000</span><br><span class="line">(bin)</span><br><span class="line">-</span><br><span class="line">Loaded 993222 bytes</span><br><span class="line"></span><br><span class="line">Programming flash 900000000f800000:f27c6 into 800000001c000000</span><br><span class="line">Erase end!</span><br><span class="line">-Programming end!</span><br></pre></td></tr></table></figure><h2 id="在UEFI下更新固件"><a href="#在UEFI下更新固件" class="headerlink" title="在UEFI下更新固件"></a>在UEFI下更新固件</h2><p>详情<a href="../uefi">uefi使用方法</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">UEFI Interactive Shell v2.2</span><br><span class="line">EDK II</span><br><span class="line">UEFI v2.70 (EDK II, 0x00010000)</span><br><span class="line">Mapping table</span><br><span class="line">      FS0: Alias(s):HD0c0:;BLK0:</span><br><span class="line">          PciRoot(0x0)/Pci(0x19,0x0)/USB(0x2,0x0)</span><br><span class="line">Press ESC in 5 seconds to skip startup.nsh or any other key to continue.</span><br><span class="line">Shell&gt; FS0:</span><br><span class="line">FSOpen: Open &#x27;\&#x27; Success</span><br><span class="line">FS0:\&gt; ls</span><br><span class="line">Directory of: FS0:\</span><br><span class="line">10/17/2023  07:47           4,194,304  uefi.mxd</span><br><span class="line">          1 File(s)   4,194,304 bytes</span><br><span class="line">          0 Dir(s)</span><br><span class="line">FSOpen: Open &#x27;\&#x27; Success</span><br><span class="line">FS0:\&gt; spi -u uefi.mxd</span><br><span class="line">Erase   : ******************************************************************************************</span><br><span class="line">****************************************************************************************************</span><br><span class="line">******************************************************************   Erase OK.</span><br><span class="line">Program : ******************************************************************************************</span><br><span class="line">****************************************************************************************************</span><br><span class="line">******************************************************************   Program OK.</span><br><span class="line">FS0:\&gt;</span><br></pre></td></tr></table></figure><p><img src="/LoongsonGuide/images/firmware/1.png" alt="UEFI Shell下烧写固件"></p><h2 id="在系统下更新固件"><a href="#在系统下更新固件" class="headerlink" title="在系统下更新固件"></a>在系统下更新固件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@loongson-pc:/home/loongson# git clone https://github.com/MarsDoge/OsTools.git</span><br><span class="line">root@loongson-pc:/home/loongson# cd OsTools</span><br><span class="line">root@loongson-pc:/home/loongson# ./build.sh</span><br><span class="line">root@loongson-pc:/home/loongson/OsTools# ./OsTools spi -u -f uefi.mxd</span><br><span class="line">mmap addr start : 0xfff78bc1f0</span><br><span class="line">------------Read Buf Get Success!-----------</span><br><span class="line">Erase   :</span><br><span class="line">[========================================================================] 100%</span><br><span class="line">Program :</span><br><span class="line">[========================================================================] 100%</span><br><span class="line">--------------Release mem Map----------------</span><br><span class="line">root@loongson-pc:/home/loongson/OsTools# reboot</span><br></pre></td></tr></table></figure><h2 id="在系统下备份当前固件"><a href="#在系统下备份当前固件" class="headerlink" title="在系统下备份当前固件"></a>在系统下备份当前固件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@loongson-pc:/home/loongson# git clone https://github.com/MarsDoge/OsTools.git</span><br><span class="line">root@loongson-pc:/home/loongson# cd OsTools</span><br><span class="line">root@loongson-pc:/home/loongson# ./build.sh</span><br><span class="line">root@loongson-pc:/home/loongson# ./OsTools spi -d -f backup.dump.fd</span><br><span class="line">mmap addr start : 0x7ffff07fc1f0</span><br><span class="line">--------------Release mem Map----------------</span><br><span class="line">root@loongson-pc:/home/loongson# ls backup.dump.fd</span><br><span class="line">backup.dump.fd</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 1. 固件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>3A6000上搭建hexo博客</title>
      <link href="/LoongsonGuide/2023/mywiki/blog/"/>
      <url>/LoongsonGuide/2023/mywiki/blog/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pacman -S nodejs npm git</span><br><span class="line">npm config set proxy=&quot;http://127.0.0.1:7890&quot;</span><br><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir loongsonwiki</span><br><span class="line">cd loongsonwiki</span><br><span class="line">hexo init</span><br><span class="line">git clone  https://github.com/hdxw/hexo-theme-prowiki.git themes/hexo-theme-prowiki</span><br><span class="line">git submodule add  https://github.com/hdxw/hexo-theme-prowiki.git themes/hexo-theme-prowiki</span><br><span class="line">vim _config.yml</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/_config.yml b/_config.yml</span><br><span class="line">index 02b67a4..2391977 100644</span><br><span class="line">--- a/_config.yml</span><br><span class="line">+++ b/_config.yml</span><br><span class="line">@@ -97,7 +97,7 @@ ignore:</span><br><span class="line"> # Extensions</span><br><span class="line"> ## Plugins: https://hexo.io/plugins/</span><br><span class="line"> ## Themes: https://hexo.io/themes/</span><br><span class="line">-theme: landscape</span><br><span class="line">+theme: hexo-theme-prowiki</span><br><span class="line"></span><br><span class="line"> # Deployment</span><br><span class="line"> ## Docs: https://hexo.io/docs/one-command-deployment</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 3. 应用 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
